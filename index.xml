<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Palfans's BLOG</title><link>https://www.palfans.net/</link><description>Recent content on Palfans's BLOG</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 20 Apr 2022 11:48:24 -0500</lastBuildDate><atom:link href="https://www.palfans.net/index.xml" rel="self" type="application/rss+xml"/><item><title>第三年了</title><link>https://www.palfans.net/the_third_year/</link><pubDate>Wed, 20 Apr 2022 11:48:24 -0500</pubDate><guid>https://www.palfans.net/the_third_year/</guid><description>&lt;p>已经第三个年头了，什么时候是个头？！&lt;/p></description></item><item><title>通过 VPN 远程办公</title><link>https://www.palfans.net/work_from_home_via_vpn/</link><pubDate>Fri, 19 Mar 2021 10:42:24 -0500</pubDate><guid>https://www.palfans.net/work_from_home_via_vpn/</guid><description>&lt;h2 id="需求">需求&lt;/h2>
&lt;p>作为一名实施人员，通常情况下需要通过各种 VPN 连接到公司和客户的工作环境来完成任务。尤其是疫情的影响，完全在家工作，对 VPN 的利用就更重了。&lt;/p>
&lt;p>但是，VPN 装多了，各种虚拟网卡驱动相互之间不一定能好好兼容，即使是 Windows 10 也很容易蓝屏，要是不幸发生在工作过程中，尤其是更新生产系统，那就有得事情做了。&lt;/p>
&lt;h2 id="解决方案">解决方案&lt;/h2>
&lt;p>我能想到的解决方案，还是虚拟机。把所有的 VPN 都装在虚拟机里边，即使不幸虚拟机挂了，也可以在几分钟内恢复一份快照，而且这个异常完全不会影响到宿主机的系统。&lt;/p>
&lt;p>在 Windows 上，常用的虚拟机解决方案有&lt;/p>
&lt;ul>
&lt;li>商用的 VMWare&lt;/li>
&lt;li>免费的 Virtualbox&lt;/li>
&lt;li>Windows 10 自带的 Hyper-V&lt;/li>
&lt;/ul>
&lt;p>在 Windows 10 ver20H2 之前，Hyper-V 和其他两个解决方案是互斥的，如果启用了 Hyper-V，那么 VMWare 和 Virtualbox 都不能正常启动。更新到 20H2 之后，它们就可以共存了。&lt;/p>
&lt;h2 id="虚拟机设置">虚拟机设置&lt;/h2>
&lt;p>为了充分利用宿主机已经安装的程序和各类文件，这套虚拟机只是用来连接到工作网络，宿主机以其为跳板完成工作任务。所以虚拟机选择 Linux 作为操作系统，内存分配 1GB 完全足够。&lt;/p>
&lt;p>网络设置方面，虚拟机需要能访问互联网，同时也被宿主机访问，所以网卡类型选择 &lt;code>bridge&lt;/code> 或者 &lt;code>nat + host-only&lt;/code>，通过 &lt;code>ip a&lt;/code> 命令查看虚拟机的网络地址，测试宿主机能否 ping 通这个地址。&lt;/p>
&lt;p>接下来就是安装 VPN 的客户端和相关配置，这里以 CentOS 7 为例。&lt;/p>
&lt;h3 id="openvpn">OpenVPN&lt;/h3>
&lt;h4 id="安装">安装&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 epel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum install -y epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 openvpn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum install -y openvpn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="配置">配置&lt;/h4>
&lt;p>创建一个 Shell Script 脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># start OpenVPN client daemon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo openvpn --daemon --cd &amp;lt;work-folder&amp;gt; --config &amp;lt;ovpn-file&amp;gt; --log-append /var/log/openvpn.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># add traffic forward firewall rule&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MASQUERADE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>sudo firewall-cmd --zone&lt;span class="o">=&lt;/span>public --query-masquerade&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;x&lt;/span>&lt;span class="nv">$MASQUERADE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;xyes&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-masquerade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="运行">运行&lt;/h4>
&lt;p>直接运行这个脚本&lt;/p>
&lt;h3 id="cisco-vpn-client">Cisco VPN Client&lt;/h3>
&lt;h4 id="安装-1">安装&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 epel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum install -y epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 vpnc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum install -y vpnc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="配置-1">配置&lt;/h4>
&lt;p>创建一个 Shell Script 脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># start Cisco VPN Client&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo vpnc &lt;span class="k">$(&lt;/span>dirname &lt;span class="k">$(&lt;/span>readlink -f &lt;span class="nv">$0&lt;/span>&lt;span class="k">))&lt;/span>/&amp;lt;cisco-legacy-vpn-config-file&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># add traffic forward firewall rule&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MASQUERADE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>sudo firewall-cmd --zone&lt;span class="o">=&lt;/span>public --query-masquerade&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;x&lt;/span>&lt;span class="nv">$MASQUERADE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;xyes&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-masquerade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参考下列例子，准备好 &lt;code>cisco-legacy-vpn-config-file&lt;/code>，文件名随意，放置在脚本的相同目录&lt;/p>
&lt;p>Cisco VPN Client Config Sample&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">IPSec gateway &amp;lt;VPN server IP&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">IPSec ID &amp;lt;Group ID&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">IPSec secret &amp;lt;Group Password&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Xauth username &amp;lt;Username&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Xauth password &amp;lt;Password&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Local Port 0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="运行-1">运行&lt;/h4>
&lt;p>直接运行这个脚本&lt;/p>
&lt;h3 id="cisco-anyconnect-secure-mobility-client">Cisco AnyConnect Secure Mobility Client&lt;/h3>
&lt;h4 id="安装-2">安装&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 epel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum install -y epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 openconnect&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum install -y openconnect
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="配置-2">配置&lt;/h4>
&lt;p>创建一个 Shell Script 脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># add traffic forward firewall rule&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MASQUERADE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>sudo firewall-cmd --zone&lt;span class="o">=&lt;/span>public --query-masquerade&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;x&lt;/span>&lt;span class="nv">$MASQUERADE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;xyes&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-masquerade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># start openconnect&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># automatically input password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;lt;password&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$PASSWORD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> X
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$X&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo openconnect &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --user &amp;lt;username&amp;gt; &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --os&lt;span class="o">=&lt;/span>win &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --csd-wrapper&lt;span class="o">=&lt;/span>&amp;lt;bogus-csd-wrapper-script&amp;gt; &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &amp;lt;VPN server IP&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Cisco AnyConnect 对客户端的要求比较多，需要检查客户端是否符合服务器安全设置，有些服务端还配置了 2FA，所以不能做到脚本完全自动连接。首先参考下列例子，准备好 &lt;code>bogus-csd-wrapper-script&lt;/code>，文件名随意，放置在脚本的相同目录，以此提交一个符合服务端安全设置的连接请求。&lt;/p>
&lt;p>Cisco Anyconnect CSD wrapper Sample&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> ! xmlstarlet --version &amp;gt;/dev/null 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>1&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;************************************************************************&amp;#34;&lt;/span> &amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;WARNING: xmlstarlet not found in path; CSD token extraction may not work&amp;#34;&lt;/span> &amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;************************************************************************&amp;#34;&lt;/span> &amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">unset&lt;/span> XMLSTARLET
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">XMLSTARLET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DATA&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;endpoint.os.version=&amp;#34;Linux&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.os.servicepack=&amp;#34;4.17.9-200.fc28.x86_64&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.os.architecture=&amp;#34;x64&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.policy.location=&amp;#34;Default&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.protection=&amp;#34;none&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.protection_version=&amp;#34;3.1.03103&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.hostname=&amp;#34;&amp;lt;VPN server hostname/IP&amp;gt;&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.port[&amp;#34;9217&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.port[&amp;#34;139&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.port[&amp;#34;53&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.port[&amp;#34;22&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.port[&amp;#34;631&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.port[&amp;#34;445&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.port[&amp;#34;9216&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp4port[&amp;#34;9217&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp4port[&amp;#34;139&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp4port[&amp;#34;53&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp4port[&amp;#34;22&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp4port[&amp;#34;631&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp4port[&amp;#34;445&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp4port[&amp;#34;9216&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp6port[&amp;#34;139&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp6port[&amp;#34;53&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp6port[&amp;#34;22&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp6port[&amp;#34;631&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.tcp6port[&amp;#34;445&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.MAC[&amp;#34;FFFF.FFFF.FFFF&amp;#34;]=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.device.protection_extension=&amp;#34;3.6.4900.2&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.fw[&amp;#34;IPTablesFW&amp;#34;]={};
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.fw[&amp;#34;IPTablesFW&amp;#34;].exists=&amp;#34;true&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.fw[&amp;#34;IPTablesFW&amp;#34;].description=&amp;#34;IPTables (Linux)&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.fw[&amp;#34;IPTablesFW&amp;#34;].version=&amp;#34;1.6.1&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">endpoint.fw[&amp;#34;IPTablesFW&amp;#34;].enabled=&amp;#34;ok&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">TICKET&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">STUB&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;-ticket&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">TICKET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="p">//&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;-stub&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">STUB&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="p">//&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PINNEDPUBKEY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-s &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">CSD_SHA256&lt;/span>&lt;span class="p">:+&lt;/span>&lt;span class="s2">&amp;#34;-k --pinnedpubkey sha256//&lt;/span>&lt;span class="nv">$CSD_SHA256&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">URL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://&lt;/span>&lt;span class="nv">$CSD_HOSTNAME&lt;/span>&lt;span class="s2">/+CSCOE+/sdesktop/token.xml?ticket=&lt;/span>&lt;span class="nv">$TICKET&lt;/span>&lt;span class="s2">&amp;amp;stub=&lt;/span>&lt;span class="nv">$STUB&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XMLSTARLET&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">TOKEN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>curl &lt;span class="nv">$PINNEDPUBKEY&lt;/span> -s &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$URL&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> xmlstarlet sel -t -v /hostscan/token&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">TOKEN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>curl &lt;span class="nv">$PINNEDPUBKEY&lt;/span> -s &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$URL&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sed -n &lt;span class="s1">&amp;#39;/&amp;lt;token&amp;gt;/s^.*&amp;lt;token&amp;gt;\(.*\)&amp;lt;/token&amp;gt;^\1^p&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">COOKIE_HEADER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Cookie: sdesktop=&lt;/span>&lt;span class="nv">$TOKEN&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">CONTENT_HEADER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Content-Type: text/xml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">URL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://&lt;/span>&lt;span class="nv">$CSD_HOSTNAME&lt;/span>&lt;span class="s2">/+CSCOE+/sdesktop/scan.xml?reusebrowser=1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl &lt;span class="nv">$PINNEDPUBKEY&lt;/span> -H &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$CONTENT_HEADER&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -H &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$COOKIE_HEADER&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --data &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$DATA&lt;/span>&lt;span class="s2">;type=text/xml&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$URL&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="运行-2">运行&lt;/h4>
&lt;p>直接运行这个脚本，如果有 2FA 验证，在提示符后输入验证码&lt;/p>
&lt;h2 id="宿主机设置">宿主机设置&lt;/h2>
&lt;p>假设创建的虚拟机采用了 &lt;code>nat + host-only&lt;/code> 的网络模式，其中 &lt;code>host-only&lt;/code> 的地址为 &lt;code>192.168.147.188&lt;/code>。在虚拟机创建好 VPN 连接后，按照远程工作环境的网络地址 &lt;code>10.100.16.5&lt;/code>，为宿主机添加路由。&lt;/p>
&lt;p>打开&lt;code>管理员模式&lt;/code>的命令行提示符，输入以下命令，宿主机在访问 10.100.16.1 - 10.100.16.254 的所有服务器时，会通过虚拟机的网络接口收发数据，以此达到连接远程工作环境的要求。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bat" data-lang="bat">&lt;span class="line">&lt;span class="cl">route delete 10.100.16.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">route add -p 10.100.16.0 mask 255.255.255.0 192.168.147.188
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>RHEL 7 上安装 Docker CE</title><link>https://www.palfans.net/install-docker-ce-on-rhel7/</link><pubDate>Wed, 30 Jan 2019 16:55:29 -0600</pubDate><guid>https://www.palfans.net/install-docker-ce-on-rhel7/</guid><description>&lt;p>最近注册了 RedHat 的 Developer 账号，可以免费订阅一个账号用于开发测试。但是，RHEL 7 默认只能安装 Docker EE，是需要花钱的。如何才能安装社区版本的 Docker 呢？&lt;/p>
&lt;p>首先提一下， 开发者计划提供的订阅账号，本身也&lt;strong>不带技术支持&lt;/strong>，万事靠自己，所以就不用顾忌安装第三方源会失去技术支持的问题。&lt;/p>
&lt;p>按照以前的经验，RHEL 可以安装 CentOS 的对应源。但是，参照 &lt;a href="https://docs.docker.com/install/linux/docker-ce/centos/">Get Docker CE for CentOS&lt;/a>，这次会出现一个错误&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Requires: container-selinux &amp;gt;= 2.9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>多次尝试后，终于把 Docker CE 装上了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo yum install -y yum-utils
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum makecache fast
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum install -y http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-2.74-1.el7.noarch.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo yum install -y docker-ce
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>比官方流程多了一步，单独安装&lt;code>container-selinux&lt;/code>。这个安装包更新挺频繁的，如果链接失效，需要前往&lt;a href="http://mirror.centos.org/centos/7/extras/x86_64/Packages/">http://mirror.centos.org/centos/7/extras/x86_64/Packages/&lt;/a>查找最近打包的安装包。&lt;/p>
&lt;p>然后就是正常使用了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[palfans@home ~]$ sudo docker version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 18.09.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.39
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.10.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: 4c52b90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Wed Jan 9 19:35:01 2019
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server: Docker Engine - Community
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Engine:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 18.09.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.39 (minimum version 1.12)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.10.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: 4c52b90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Wed Jan 9 19:06:30 2019
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>从 WordPress 迁到 Hugo</title><link>https://www.palfans.net/moving_wordpress_hugo/</link><pubDate>Fri, 25 Jan 2019 21:46:00 -0600</pubDate><guid>https://www.palfans.net/moving_wordpress_hugo/</guid><description>&lt;p>&lt;img src="https://res.palfans.net/img/migration.png" alt="">&lt;/p>
&lt;h2 id="起因">起因&lt;/h2>
&lt;p>说起来，都不记得这是第几次折腾 Blog 的服务器了。当初为了提高从国内访问的速度，我把搭梯子的 VPS 放在了香港的数据中心，顺便把 Blog 也放在同一台服务器以求节约成本。转眼自己肉翻这么多年，再也没有机会用那把梯子。但从美国家里访问 Blog 就慢得不能忍受，而且因为 VPS 性能不好，时不时就会出现 503 错误。思考再三，决定把站点搬回美国，反正流量可以忽略，至少要满足自己的。&lt;/p>
&lt;h2 id="选型">选型&lt;/h2>
&lt;h3 id="wordpress-的问题">WordPress 的问题&lt;/h3>
&lt;p>继续使用 WordPress 吗？我有点犹豫了。&lt;/p>
&lt;ol>
&lt;li>WordPress 体量越来越大，新版本我都不太会用了。&lt;/li>
&lt;li>网站运行速度慢。更新版本以后，常常需要等好几分钟才能打开后台。&lt;/li>
&lt;li>离线编辑器不好用。Windows Live Writer 以及后续的 &lt;a href="http://openlivewriter.org/">Open Live Writer&lt;/a> 都不再更新了。&lt;/li>
&lt;li>太流行，也就意味着目标大。总是要担心各种来自 PHP，WordPress 以及 MySQL 的安全漏洞。&lt;/li>
&lt;li>动态网站遭遇 DDoS 的时候，开销也大大高于静态网站。&lt;/li>
&lt;li>备份也不省心，定期备还占地方。&lt;/li>
&lt;/ol>
&lt;h3 id="github-pages--hugo">Github Pages + Hugo&lt;/h3>
&lt;p>突然有一天，我发现大量的码农网站都是由 &lt;a href="https://gohugo.io/">Hugo&lt;/a> 驱动的，这是个啥？&lt;/p>
&lt;p>看了一圈，它就是个轻量（只有一个文件）的静态页面生成器，读取 Markdown 文件，生成静态的 HTML 文件。把这些 HTML 文件提交到 Github Pages，就能访问了。&lt;/p>
&lt;h4 id="优势">优势&lt;/h4>
&lt;ol>
&lt;li>Github Pages 免维护。整个站点全是纯静态的页面，唯一的交互就是评论系统，也是利用了 Github 自己的 Issues。再也不用纠结服务器问题。&lt;/li>
&lt;li>Github Pages 速度快。还是因为纯静态网页的优势，至少在美国的网络环境我能秒开各个托管在 Github 的网站。&lt;/li>
&lt;li>自带 SSL 证书。Github 自动给所有 Pages 网站加上小绿锁，包括自定域名。虽然仍是基于 Let&amp;rsquo;s Encrypt 的免费证书，但每三个月自动续期，完全不用操心。&lt;/li>
&lt;li>Hugo 足够快。我试了下我总共需要生成 976 个页面，耗时 2 秒钟。&lt;/li>
&lt;li>Hugo 自带服务器端。调试非常容易。&lt;/li>
&lt;li>熟悉 git 操作。公司体量较大，现在终于开始慢慢转向使用 git 做版本控制。我也可以借此熟悉 git 的各种操作。&lt;/li>
&lt;li>熟悉 markdown 语法。&lt;/li>
&lt;li>感觉网站放在 Github 是码农的认证标识。&lt;/li>
&lt;/ol>
&lt;h4 id="劣势">劣势&lt;/h4>
&lt;ol>
&lt;li>之前 WordPress 的很多标配功能没有了，花时间调试的模板也不能直接用。&lt;/li>
&lt;li>上手曲线不够平缓，有学习门槛。&lt;/li>
&lt;li>相当依赖命令行。WordPress 可以利用在线后台更新内容，但现在就必须本地安装 Git，Hugo，Markdown 编辑器，写一篇文章就需要提交一次。虽然可以利用 Travis CI 来自动生成静态页面，但免费用户只能读取 Github 的公有库，读不了私有库，暂时没考虑。&lt;/li>
&lt;li>没想好。。。&lt;/li>
&lt;/ol>
&lt;h2 id="开干">开干&lt;/h2>
&lt;h3 id="搭环境">搭环境&lt;/h3>
&lt;p>这个就比较简单了，安装 Git，Hugo 和 Typora，连接到远端的 Github 库，Google 一下，各种教程应有尽有。&lt;/p>
&lt;h3 id="数据迁移">数据迁移&lt;/h3>
&lt;p>网上都在推荐一款插件 &lt;a href="https://github.com/SchumacherFM/wordpress-to-hugo-exporter">wordpress-to-hugo-exporter&lt;/a> ，实测是个&lt;strong>坑&lt;/strong>。在最新的 WordPress 上报函数重复定义的错误，自己段位低，解决不了。我用了一个 python 脚本 &lt;a href="https://github.com/wooni005/exitwp-for-hugo">exitwp-for-hugo&lt;/a>，需要先导出 XML，再转成 Markdown，不过执行效率非常高，几百篇文章，几秒搞定。每篇文章转换后都自带了 URL 属性，直接就能用，最后的链接保持了 domain/title 的形式，完全不影响 Google 的搜索结果。&lt;/p>
&lt;h2 id="最后">最后&lt;/h2>
&lt;p>其实这篇文章是试水，看看新建文章到底好不好使。&lt;/p>
&lt;p>就这。&lt;/p></description></item><item><title>Xfce4 failed to execute default Terminal Emulator</title><link>https://www.palfans.net/xfce4_failed_to_execute_default_terminal_emulator/</link><pubDate>Fri, 10 Aug 2018 22:48:09 +0000</pubDate><guid>https://www.palfans.net/xfce4_failed_to_execute_default_terminal_emulator/</guid><description>&lt;p>Xfce 是一款针对 Linux 系统的现代化轻型开源桌面环境，基于 GTK+2.x 开发完成。相对于传统的 GNOME 桌面来说，xfce 足够轻量化，资源占用很低，但使用体验并不差。尤其对于公司的服务器来说，偶尔需要桌面环境，但又不想安装臃肿的 GNOME，Xfce 就是个不错的选择。&lt;/p>
&lt;p>最近在公司新装了几台机器，装完发现 Xfce4 自带的终端模拟器一打开就报错。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Failed to execute default Terminal Emulator.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Input/output error.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>从字面上看，I/O 有问题。查看了系统设置，终端设置都是正确的。Google 搜了一圈，有一个说法是终端的编码不是 UTF-8 也会导致这个问题，但我这里已经默认为 UTF-8。看日志发现如下错误：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/usr/bin/xfce4-terminal: symbol lookup error: /usr/bin/xfce4-terminal: undefined symbol: vte_regex_new_for_match
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>symbol 找不到？前几个月安装其他机器的时候，没有这个问题。因为每次都是用 yum 在线安装，应该是版本升级造成的。看下当前用的什么版本的 vte。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ldd /usr/bin/xfce4-terminal | grep vte
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">libvte-2.91.so.0 =&amp;gt; /lib64/libvte-2.91.so.0 (0x00007fdcd8cdd000)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ rpm -qa|grep vte291
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vte291-0.38.4-2.el7.x86_64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装的 Linux 是 RHEL 7.3，vte291 版本是 0.38，有可能新版本的 vte 包含了缺失的 symbol。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ sudo yum install vte291
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loaded plugins: product-id, search-disabled-repos, subscription-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resolving Dependencies
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package vte291.x86_64 0:0.38.4-2.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package vte291.x86_64 0:0.46.2-1.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Dependency: libpcre2-8.so.0()(64bit) for package: vte291-0.46.2-1.el7.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package pcre2.x86_64 0:10.23-2.el7 will be installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Finished Dependency Resolution
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>新版本的 vte291 连带安装了 pcre2，再次尝试打开终端，还是报同样的错，但日志不同了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/usr/bin/xfce4-terminal: symbol lookup error: /lib64/libvte-2.91.so.0: undefined symbol: gtk_widget_class_set_css_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>又有 GTK 的 symbol 找不到，升级 GTK。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ sudo yum install gtk3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loaded plugins: product-id, search-disabled-repos, subscription-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resolving Dependencies
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package gtk3.x86_64 0:3.14.13-20.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package gtk3.x86_64 0:3.22.10-4.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Dependency: pango(x86-64) &amp;gt;= 1.37.3 for package: gtk3-3.22.10-4.el7.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Dependency: libXrandr(x86-64) &amp;gt;= 1.5.0 for package: gtk3-3.22.10-4.el7.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Dependency: glib2(x86-64) &amp;gt;= 2.49.4 for package: gtk3-3.22.10-4.el7.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Dependency: atk(x86-64) &amp;gt;= 2.15.1 for package: gtk3-3.22.10-4.el7.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Dependency: gtk-update-icon-cache for package: gtk3-3.22.10-4.el7.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package atk.x86_64 0:2.14.0-1.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package atk.x86_64 0:2.22.0-3.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package glib2.x86_64 0:2.46.2-4.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package glib2.x86_64 0:2.50.3-3.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package gtk-update-icon-cache.x86_64 0:3.22.10-4.el7 will be installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package libXrandr.x86_64 0:1.4.2-2.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package libXrandr.x86_64 0:1.5.1-2.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package pango.x86_64 0:1.36.8-2.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package pango.x86_64 0:1.40.4-1.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Dependency: harfbuzz(x86-64) &amp;gt;= 1.0.3 for package: pango-1.40.4-1.el7.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package harfbuzz.x86_64 0:0.9.36-1.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Dependency: harfbuzz(x86-64) = 0.9.36-1.el7 for package: harfbuzz-icu-0.9.36-1.el7.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package harfbuzz.x86_64 0:1.3.2-1.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package harfbuzz-icu.x86_64 0:0.9.36-1.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package harfbuzz-icu.x86_64 0:1.3.2-1.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Processing Conflict: gtk-update-icon-cache-3.22.10-4.el7.x86_64 conflicts gtk2 &amp;lt; 2.24.29 --&amp;gt; Restarting Dependency Resolution with new changes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package gtk2.x86_64 0:2.24.28-8.el7 will be updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---&amp;gt; Package gtk2.x86_64 0:2.24.31-1.el7 will be an update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; Finished Dependency Resolution
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>终于又看到黑色的终端。&lt;/p></description></item><item><title>不能不同意的知乎隐私政策</title><link>https://www.palfans.net/zhihu_privacypolicy/</link><pubDate>Sun, 29 Apr 2018 03:05:45 +0000</pubDate><guid>https://www.palfans.net/zhihu_privacypolicy/</guid><description>&lt;p>最近知乎上线了一个新功能，打开任何问答页面，都会弹出一个隐私政策对话框，你有同意或者不同意两个选择，但是，如果你想继续阅读内容，不同意是不行的。&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/zhihu_privacypolicy.gif" alt="">&lt;/p>
&lt;p>那知乎都想拿些什么东西呢？大致看了下，各种社交信息，身份证号以及手机设备号等等只要能弄到的隐私信息，知乎都想要。而且，它不会“主动”公开披露和转让隐私，但没说它不会公开披露和转让隐私。这个就比较尴尬了。&lt;/p>
&lt;p>不是很理解知乎想干什么，打算做个隐私贩子？&lt;/p>
&lt;p>不过目前有可用的方法在不点击同意按钮的前提下，强制跳过这个窗口，已测试，好使。&lt;/p>
&lt;blockquote>
&lt;h3 id="zhihu_blockprivacypolicyhttpsgithubcomqinggozhihu_blockprivacypolicy">&lt;a href="https://github.com/QingGo/zhihu_blockPrivacyPolicy">zhihu_blockPrivacyPolicy&lt;/a>&lt;/h3>
&lt;p>破解知乎网页端不同意隐私协议就没法用的油猴脚本。&lt;/p>
&lt;p>The Tampermonkey script to block privacy policy of the web site Zhihu.&lt;/p>
&lt;p>用法：安装油猴插件，然后新建油猴脚本。把“zhihu_blockPrivacyPolicy.js”里的内容复制进去保存即可。&lt;/p>
&lt;p>Usage: Install Tampermonkey Browser plug-in, then create a new Tampermonkey script. Copy the contents of &amp;ldquo;zhihu_blockPrivacyPolicy.js&amp;rdquo; into the script and save it.&lt;/p>
&lt;/blockquote></description></item><item><title>禁用 screen 的动态标题功能</title><link>https://www.palfans.net/disable_screen_dynamic_title_feature/</link><pubDate>Thu, 22 Mar 2018 21:10:38 +0000</pubDate><guid>https://www.palfans.net/disable_screen_dynamic_title_feature/</guid><description>&lt;p>GNU screen 是 Linux 上面一个非常有用的程序。它默认启用了窗口动态标题的功能，每次切换目录时，会自动用当前目录的全路径作为窗口的标题。一般情况下，这个功能很贴心，但有时候路径很长，窗口名的 tab 会显示不全而陷入混乱，我们只需要一个简明扼要的自定义标题来区分不同的窗口。&lt;/p>
&lt;p>一个临时的解决方案是在当前窗口中运行 “unset PROMPT_COMMAND”。因为 bash 通过变量 PROMPT_COMMAND 将定制的路径内容传递给 screen，把这个变量 unset 窗口名就不会再变化。如果想默认禁用这个功能，可以把这条命令加入当前用户的 ~/.bashrc，这样所有新开窗口都会生效。&lt;/p>
&lt;p>禁用动态标题后，只需要 ctrl + a + A 就能自定义窗口名。&lt;/p></description></item><item><title>Kodi 通过 SMB 连接远程 Win 10 失败</title><link>https://www.palfans.net/kodi_cannot_access_win10_via_smb/</link><pubDate>Thu, 15 Mar 2018 21:03:12 +0000</pubDate><guid>https://www.palfans.net/kodi_cannot_access_win10_via_smb/</guid><description>&lt;p>我同时在 Win 10 和 Android 平板安装了 Kodi，通过 SMB 连接到家里的 Win10 NAS 视频媒体库。之前工作正常，这两天突然发现 Android 平板连不上，每次设置好用户名密码就报连接超时（Connection Timed Out），但 Win 10 平板依然正常。&lt;/p>
&lt;p>上网搜索一圈，在 Kodi 的&lt;a href="https://kodi.wiki/view/SMB/Windows">官方维基&lt;/a>找到了答案。貌似 Win10 在某次自动升级以后，默认关闭了 SMB 1.0/CIFS File Sharing Support 的功能，需要重新手动打开。&lt;/p>
&lt;p>打开控制面板中的“添加删除程序功能”模块，或者在 Windows 开始旁边的搜索框中输入“Turn Windows feature on or off”并找到控制面板的最佳匹配项。&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/300px-2017-11-14_08-23-47.png" alt="">&lt;/p>
&lt;p>在 Windows 功能中找到 SMB 1.0/CIFS File Sharing Support 并激活，Windows 会安装相应的文件。重启 Win10 之后，就能重新支持 Kodi 采用的旧版 SMB 协议。&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/OptionalFeatures_2017-11-14_08-24-53.png" alt="">&lt;/p>
&lt;p>再次打开 Android 平板的 Kodi，通过 SMB 连接就能打开远端的媒体库了。这个问题并没有出现在 Win10 平板的 Kodi 中，估计因为 Android 版本还没有支持 SMB 2.0。&lt;/p>
&lt;p>伴随 Win10 自动升级还有另外一个坑在等着 Kodi。SMB 协议问题解决后，输入正确的 Outlook 账号也不能成功连接到远端 NAS的共享文件夹。解决方法是，升级后的 Win10 文件共享不能使用邮箱作为用户名了，需要登录到 Win10，打开 CMD 窗口，输入 whoami，会列出当前的机器名和用户名。使用这个用户名和对应的 Outlook 账号密码就能成功打开共享文件夹。&lt;/p></description></item><item><title>学什么都救不了中国人</title><link>https://www.palfans.net/nothing-can-rescue-chinese/</link><pubDate>Fri, 28 Jul 2017 15:45:01 +0000</pubDate><guid>https://www.palfans.net/nothing-can-rescue-chinese/</guid><description>&lt;p>Github的科学上网界出了件恶心的事情，有人号称“为了正义”，泄漏作者信息，最后该作者认怂，删除所有代码。我从头到尾围观了整件事情，一股深深的无力感挥之不去。鲁迅当年说，学医救不了中国人。其实，学什么都救不了中国人。
想起当年看过的一篇由PSP破解引申开的文章，本质挺契合的。我感觉，可能中国心态最好的一群人，都聚集在草榴社区了。&lt;/p>
&lt;p>由psp破解谈到中国伸手党式网民的心理
出处：不详&lt;/p>
&lt;p>如果仔细说起PSP为什么会在中国流行，大概可以列出不下一千种理由。可千言万语说到归齐，没有破解的PSP肯定无法成为影音游戏通吃的装X利器，也不会在街头巷尾地铁公交里成为装机量第一的掌上设备。稍微对PSP熟悉一点的人可能都知道，PSP在2000型之前的时代有着各种美好，所有的自制软件和破解都畅通无阻。后来SONY的CEO来了一趟中国，看到比日本专卖店规模还大的水货电玩批发之后就回去痛下决心，彻底整改PSP的主板构架，愣是把这机器的破解漏洞给堵上了。导致PSP3000型苦等半年多才等到一个软件漏洞破解。随后就是硬件厂商和破解黑客们之间的战斗，你升级固件，我升级自制软件，你来我往不亦乐乎。&lt;/p>
&lt;p>让时间回拨到一年前，2010年1月最后两天，SQUARE ENIX的PSP大作《王国之心 梦中诞生》发售，这个使用了新升级文件的游戏让所有拿着PSP等破解的玩家傻了眼。游戏的特殊构造让目前的自制系统无法运行ISO文件。此时最早开发破解 固件M33的大神Dark Alex早已退隐，百分之九十九的玩家都在使用GEN小组的自制系统。&lt;/p>
&lt;p>所有人都希望能有人出现破解掉这个游戏，让自己能玩到最新最快的PSP新作。&lt;/p>
&lt;p>实现这个愿望的并不是国外黑客，而是一名国内的自制软件制作者。在这之前我们用盗版的时候虽然总不忘自夸一句我国人民勤劳勇敢什么的，但其实心里都明白，大部分破解高手集中在德国和俄罗斯，历代游戏主机的破解都跟国人没有半毛钱关系。只是我们宁愿相信群众的力量无穷大，相信茫茫人海中总会有人站出来解决这个问题——反正肯定不是摇旗呐喊的自己就行。&lt;/p>
&lt;p>这个人的ID已经不用复述，在高调开贴声称自己要破解《王国之心 梦中诞生》后，他的帖子点击率和回复都达到了一个前所未有的高度。有的人认为他是哗众取宠，有的人从PSP游戏文件构成分析这件事儿的难度，也有人更直接 地冷嘲热讽……然后在大约一周后，他放出了在游戏中开启金手指软件的截图，游戏破解成功。&lt;/p>
&lt;p>十天后，他放出了破解傻瓜包。&lt;/p>
&lt;p>几周后，他放出了可以直接玩更高版本系统下游戏的自制固件。&lt;/p>
&lt;p>于是所有的质疑和讽刺都化作此起彼伏的赞扬，他的帖子被标红，他的破解让外国玩家也不远万里过来注册，他的名声传遍了世界，他的ID被尊称为大神，就像曾经带给PSP破解最佳思路的Dadk Alex一样。&lt;/p>
&lt;p>只是很少有人能记得，DA在没有开发M33后续固件后，论坛上那些质疑和嘲讽的声音，甚至有人跑到DA的国外官方论坛上叫骂。那些帖子和言论随着时间沉入系统深处，却没能沉淀出伸手党们平静的心态。&lt;/p>
&lt;p>历史总是惊人地相似，这位曾经被称为国人骄傲的“大神”，在成功开发出两代自制固件，破解掉许多新游戏之后，也遭遇了相似的一幕。&lt;/p>
&lt;p>是个玩PSP的都知道《怪物猎人3P》要在2010年的12月1日发售，既是为了纪念《怪物猎人》系列周年庆，也是为了让软件商的年度财报好看一些。对于这款在中国和日本都有着极高人气的游戏，每个粉丝都热切期盼着。&lt;/p>
&lt;p>在《怪物猎人3P》发售前一周，“大神”发帖表示破解毫无压力。目前自制固件无法运行该游戏，但他可以通过一些改进搞定一切。&lt;/p>
&lt;p>接下来的精彩，超过的最初所有人的想象。&lt;/p>
&lt;p>“大神”有一个习惯，必须等到游戏发售一周后公布销量才发布破解。《怪物猎人3P》偷跑数日，各大论坛上憋着等下载的人数概超过了六位，帖子里各种惨嚎和胡言乱语不计其数。不负众望的“大神”用数小时即完成了《怪物猎人P3》的破解，随后宣布可以先给各大汉化组，以便汉化组能够尽快让大家玩到汉化游戏。&lt;/p>
&lt;p>事实证明，这个世界上最美好的只有愿望。当时得知“大神”已经破解了《怪物猎人3P》的伸手党们本已躁动不安，有人说这搞破解的在装X，有人说他是为了赚取眼球和点击率，当然还有更难听的，总之人性的各种精彩就在这一刻被表现得淋漓尽致。在变了味的网络喧嚣中，这个故事忽然急转直下。&lt;/p>
&lt;p>“大神”私下给出的破解补丁被自己熟悉的一位论坛版主泄露出去了，于是大部分支持的声音瞬间变成了声讨——凭什么你能给他却不给我们玩？更有甚者，人肉出了“大神”的个人信息要发布出去。威胁到了现实生活的“大神”惟有选择退出PSP破解界，从此消失在众人的视线中。&lt;/p>
&lt;p>在离开网络之前，他发布了还在完善中的新自制固件，并留下了无奈的留言——“看在我让你们玩了这么多新游戏的份上，让我安静的离开吧。”&lt;/p>
&lt;p>当国外PSP破解黑客得知这位东方同行退出之后，几乎在第一时间发表了遗憾的声明，甚至他们也承认这同道中人才是“有史以来最好的PSP破解黑客”。但这一切已无法挽回，《怪物猎人3P》破解了，而付出这样代价是任何人都始料未及的。&lt;/p>
&lt;p>广告商人继续卖UMD，该玩盗版的继续玩盗版，BBS上的管理员在打扫过论坛之后，关于这件事前前后后的就算是结束了，一切都如未曾发生。可谁也不知道下一个破解PSP新游戏的人在哪里，谁也不知道下一次又有谁要遭受网络冷暴力。一个一个汉化组成立又解散，一次又一次的攻讦和辱骂。有时候那些继续坚持互联网共享精神的人们也忍不住要问一句。&lt;/p>
&lt;p>大爷们，你们到底想怎样？&lt;/p>
&lt;p>从来就没温暖过&lt;/p>
&lt;p>我国玩家的尴尬早已不是一天两天的事了，这样一个不允许电子游戏机成为进口商品的国家里想要玩游戏需要付出很多曲折的代价。面对没有官方中文版和游戏首发必然不会到货的环境，网络共享发布和汉化一直是游戏圈最受关注的两个群体。而我们通常会把那些下载免费游戏的人称为伸手党——这没什么侮辱的意思，就和字面上的意思一样，大多数玩家付出的无非就是下载的时间和点几下鼠标而已，他们可能未曾想过别人付出什么样的艰辛。
最容易受到诟病的当然还是汉化组，游戏的汉化组和影视作品字幕组还不太一样。一般来说一个游戏的汉化过程都漫长又痛苦，除非特别有爱也没什么人会去做这件事。遗憾的是就算这么单纯的工作，一样有人不断表现出各种大爷丰采。&lt;/p>
&lt;p>“《XXX》的汉化怎么还没开始？汉化组的人都.去了吗？”
“你们说要汉化《XXXX》都已经快四个月了，怎么还没有截图放出！”
“垃圾，这汉化也太垃圾了！”
“为什么没有人汉化《XX》，赶快来人开坑啊！”
…………&lt;/p>
&lt;p>这也是为什么许多汉化组面对外人询问工作进度时态度不怎么好的主要原因——大家只是在网络上做白工而已，忽然凭空多出这么多视察工作的.，谁的心情也不会太好。而且大多数不顾别人感受胡言乱语的人反倒不会认真去体验别人的汉化作品，他们这么做通常只是因为网络上问句话没有成本而已，就像他们下载那些别人放出的游戏和汉化补丁那样。在这间或里即使有许多真挚的感谢，也被淹没在各种责问之中了。很多人可能一辈子都没怎么被人尊重过，因此也不懂得怎样尊重别人。&lt;/p>
&lt;p>这样的无理取闹导致大多数汉化组行事低调，哪怕发布新版本汉化补丁也战战兢兢，生怕惹恼了大爷们招来不知道多少叫骂和喷贴。不管是错字、延期还是有了死机BUG，总免不了要被人喷上一番。以至于后来许多搞汉化的都是做一票就走，搞完项目就宣布解散，免得被人整个团队一起喷。&lt;/p>
&lt;p>有的人说反正汉化组那么多，喷跑几个心理素质差的，还会有人继续干这个活儿。可这帮人不知道破解领域就那么几个能人，有人跑去DA的论坛喷他，有人在GEN小组的留言板上刷屏，也有人各种喷国内破解的大神……这些人绝大多数是因为被他们喷的人才玩到的新游戏，他们很容易就忘记了这一点，正如他们希望别人善待自己，但自己完全不懂如何善待别人。&lt;/p>
&lt;p>我们的社会怎么了&lt;/p>
&lt;p>常听人说起说一个道理：那就是你对某个人好，就得一直好下去，只要有一次不够好，以前所做的各种努力可能都会付之东流。说这话的人肯定对人性有相当程度的了解，他也一定经历过什么惨痛的教训。&lt;/p>
&lt;p>在很多时候，做破解也好，做软件共享也好，或者搞汉化也好，都面临这样一种窘境。你做得好就是几声赞扬，你做不好了马上质疑谩骂狼烟四起。这就好比许多软件常年免费，忽然有一天收钱了，我们愤怒又失望地骂了一万句，这才记起来，按照这个世界的规矩其实本来就该收钱。只是我们享受了太多优待，把这优待当成了常态。&lt;/p>
&lt;p>其实没有什么事是真正应该的。比如几年前有个台湾人宣布独立汉化《皇家骑士团2》的SFC版，但不外流。唯一要求就是申请汉化补丁的人答应不要外泄，同时附上自己手中正版《皇家骑士团2》卡带的照片三张。这要求其实不算过分，也比较符合台湾玩家尊重正版的习惯。遗憾的是国内大部分玩家并没有SFC的卡带，移植版的PS和SS的正版光盘更不用说了。&lt;/p>
&lt;p>于是觉得无望拿到补丁的玩家纷纷登陆那个人所在的论坛，各种破口大骂，极尽诋毁之能事。当然骂完人家照例是不给补丁的，只是那些留言让彼岸的玩家又低看了内地玩家一次。&lt;/p>
&lt;p>大概所有人都能记得那些汉化、字幕还和共享软件上都会标明是以研究和学习为目的，并不是用于商业用途，请于24小时内删除等等。这些字眼本身就已经是阐述互联网共享的基本态度，一切都应该以发布者的决定为主，因为我们只是些伸手党。可偏偏有人就是想当发布者的主人，冀望于骂几句之后改变别人的意见。没错他们是改变了，他们让更多的人学会了珍惜生命，远离破解和汉化。&lt;/p>
&lt;p>其实这种事远远不止发生在游戏圈，笔者一个朋友家境不错，为人又古道热心，开了一家桌游店。经常有人电脑坏了打电话问他该怎么办，他说如果是小问题你就直接拿来修吧。那边的人就问要多少钱，他说一般情况下不会收钱。然后电话那边的人往往沉吟片刻，说好吧我再想想就挂了电话。这位朋友就不太明白，免费修电脑什么的为什么会让人那么犹豫。后来经旁人之口才知道，原来很多人已经不相信有素不相识的人可以免费帮别人忙这种事发生了，在他们看来这个社会上的每一次举手之劳都要明码标价，否则就有更深的阴谋。&lt;/p>
&lt;p>我想这也是很多人面对破解、汉化和游戏共享发布等情况时的内心真实写照。对于社会大环境的怀疑，对于他人目的的揣测和出于自身的不成熟造就了众多的网络喷子，在一个不必担心责任问题的地方指责别人的确是一件爽快的事。更重要的是网络冷暴力所造成的后果往往难以追查，毕竟法不责众，犯错的是一批人而不是一个人。这个责任无法落实到谁头上去。&lt;/p>
&lt;p>我们所向往的自由&lt;/p>
&lt;p>自由宣言里对自由的定义是“在不伤害别人的前提下，你所做的一切都是正确的”。遗憾的是很少有人在发表自己看法时能够想起这句定义。在网络这个目前最开放的平台上，许多人努力寻求自由，却借着自由之名做着无尽伤害他人的事。这就像往往我们渴望公平，又希望自己拥有并利用那些不公平的力量；我们渴望尊重，却总在话里话外表现出对他人的不尊重；我们渴望得到而很少付出，却总在抱怨别人付出的太少……我们所做的一切，并不是自由，只是在扼杀自由所带来的种种可能而已。&lt;/p>
&lt;p>我们对互联网最大的贡献，不过是我们每个人都是一个普通用户而已。而我们如果还想让这个世界更繁荣快乐一些，对别人的肯定和宽容是不是更重要呢？文章开头提到的那位在国内被称为“大神”的网友在《寄生前夜 第三次生日》破解遇到瓶颈后又一次出现，玩家们又一次玩到了最新的免费游戏。经过失去再度拥有，让很多人的改变了自己的言论。这不禁让我想起当Dark Alex宣布自己退出破解界不再研发自制系统的时候，在中文论坛里看到那许多叫嚣着“DA大神已经不行了”，“快滚吧，那么久都不更新系统”的声音。在这些Dark Alex看不懂的中文帖子里，我小心翼翼地写上“感谢你这么多年来的辛勤工作，让我们玩到了那么多好游戏”这样一句话。今天我在这里又一次说出来，觉得这样的话每一个字都没有错，并认为这才是对互联网共享精神最大的尊重。&lt;/p></description></item><item><title>租租车的国际驾照认证件能用吗？</title><link>https://www.palfans.net/does-zuzuche-idp-work/</link><pubDate>Fri, 30 Jun 2017 19:24:04 +0000</pubDate><guid>https://www.palfans.net/does-zuzuche-idp-work/</guid><description>&lt;p>&lt;img src="https://res.palfans.net/img/zuzuche_idl.jpg" alt="">&lt;/p>
&lt;p>这两天看到微信朋友圈里在宣传租租车可以免费办理国际驾照认证件（&lt;a href="http://w.zuzuche.com/tidl/">链接&lt;/a>），号称香港公证行和NAATI联合翻译认证，9国语言，权威认证，畅行全球200个国家，包括美国、加拿大、澳大利亚、以及英德意等欧洲国家。脑中升起一个问号，真是这样的吗？&lt;/p>
&lt;p>上网搜了一下，这本认证件全名叫Translation of International Driver License，由租租车和International Driving Club联合推出。它自己的说明页明确指出，该认证件根据《联合国道路交通公约》，严格按照国际标准将中国驾照翻译成9国语言，支持超过200个国家和地区租车、取车。&lt;/p>
&lt;p>看起来好像很正规。但是，这里我发现一个问题。它声称自己的法律依据是《联合国道路交通公约》，那就看看这个公约到底是什么。&lt;/p>
&lt;blockquote>
&lt;p>联合国1949年在日内瓦制定了《道路交通公约》，参加公约的国家在道路规范、标志、信号、交通规则以及跨国运输车辆的规格等方面采取相似的标准，同时为成员国公民在其他国家驾驶车辆提供方便，由缔约国政府或其授权机构根据公民的需要，依据其有效的国内驾照以多种文字颁发一份许可证，证明该公民的国内驾照为合法文件。对官方语言与颁发驾照地不同的国家，该许可证的好处更加突出：驾车人同时出示本国驾照和IDP，就可以迅速准确地核实驾车人的身份和驾驶资格，给执法机关、交通运输相关行业例如租车公司和保险公司带来很大方便。尽管联合国的公约文字上把IDP称为“国际（驾驶）执照”，但是它必须与持有人的国内驾照一同使用，仅仅有IDP既不能在外国也不能在本国合法开车。&lt;/p>
&lt;p>该公约在1968年修订，文本从原来只有英法两种文字变为当时联合国法定的五种文字，篇幅也从118页增加到466页。迄今在新公约上签字的有82个国家和地区，其中70个已经递交了批准书。但是因为1949年公约成员国还有一半以上没有签署和批准新的公约，而且公约的很多基本规定，包括国际驾照的章节并没有大的变化，所以国际驾照的规定在这两个公约的成员国都适用。——美国国务院Blog《雾谷飞鸿》&lt;a href="https://blogs.america.gov/mgck/2012/04/24/permit/">链接&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://res.palfans.net/img/Countries_that_Recognize_International_Driving_Permit.png" alt="Countries_that_Recognize_International_Driving_Permit">&lt;/p>
&lt;p>深蓝：国际道路交通公约签约国和地区 浅蓝：非签约国但承认国际驾驶执照&lt;br>
图片来源：&lt;a href="https://zh.wikipedia.org/wiki/%E5%9C%8B%E9%9A%9B%E9%A7%95%E9%A7%9B%E5%9F%B7%E7%85%A7">维基百科-国际驾照词条&lt;/a>&lt;/p>
&lt;p>我们能很轻松的发现，中国既不是深蓝，也不是浅蓝。这说明中国根本不承认国际驾照。在广东生活的朋友，对香港过境车挂中港双牌照应该已经司空见惯，这也是因为中国不是《道路交通公约》签约国，不认可该公约，致使所有外国和地区登记车辆，必须悬挂单独的中国牌照。&lt;/p>
&lt;p>租租车这本认证书说是由香港公证行和NAATI（澳大利亚全国翻译认证机构）联合翻译认证。因为香港和澳大利亚都是《国际道路交通公约》签约国和地区之一，那么认证可以通过挂靠香港或者澳大利亚来实现合法使用吗？结论仍然是不行。国际驾照要求必须由居住国政府授权机构针对持有的居住国驾照来签发，换句话说，中国驾照对应的国际驾照必须由中国政府授权的机构签发才可能是合法有效的，但很明显中国都不是签约国，根本不可能有这么一份合法的认证书。所以不管租租车合作的这个International Driving Club是个什么背景的国际组织，它都没有资格签发任何和中国驾照有关的国际驾照认证。&lt;/p>
&lt;blockquote>
&lt;p>最后提醒大家一点，就是有人向非日内瓦《道路交通公约》缔约国公民兜售“国际驾照”，有的还打出与美国“权威机构”合作、甚至作为这种机构代理的旗号，而且说要把公民的驾照资料送到美国核实，然后在美国制作国际驾照，再快递回国交给当事人，所以收费高昂（美国办理国际驾照现在收费15美元）。知道了公约附件七的规定，就应该清楚这些都是不对的，这样得到的所谓“国际驾照”，与把该国驾照翻译成英文、然后加以公证的作用没有什么区别。这种骗人的机构有的还宣称可以办理有效期5年的“国际驾照”，那更是荒唐，因为联合国的公约明白无误地规定，国际驾照有效期只有一年。。——美国国务院Blog《雾谷飞鸿》&lt;a href="https://blogs.america.gov/mgck/2012/04/24/permit/">链接&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>所以凭租租车这本国际驾照，只可能在那些承认翻译公证后的中国驾照有效的国家和地区使用，但这不一定适合所有《道路交通公约》的签约国，需要对每一个国家的专门法律条文进行研究。&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/image.png" alt="">&lt;br>
图片来源：穷游问答 &lt;a href="http://ask.qyer.com/question/962637.html">链接&lt;/a>&lt;/p>
&lt;p>从租租车的回答来看，这是相当不负责任的。他们只和车行供应商多次确认，而不是自己去研究相关的法律条文或者咨询专业律师，如果真的出了什么意外，车行供应商是不会帮你向执法部门做任何解释的。&lt;/p>
&lt;p>具体到中国驾照能否在美国合法开车，这个问题太复杂，因为美国50个州都有自己不同的规定，而且一直在不断调整。因为常年生活在德州，2013年我给Texas DPS（得克萨斯州公共安全部门）发过一封邮件，询问我持有中国驾照能否在德州境内合法驾驶，回复如下：&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>DONOTREPLY_CustomerSupport&lt;/strong> &amp;lt;&lt;a href="mailto:DONOTREPLY_CustomerSupport@dps.texas.gov">DONOTREPLY_CustomerSupport@dps.texas.gov&lt;/a>&amp;gt;&lt;/p>
&lt;p>Thank you for giving the Department the opportunity to respond to your email inquiry.&lt;/p>
&lt;p>You can drive in Texas with your license from China for up to ninety days, however, if you have an International license you can drive in Texas for up to one year. You must have your Chinese driver license when you drive in Texas at all times.&lt;/p>
&lt;p>I hope this information is helpful. Please do not hesitate to contact Customer Service at &lt;a href="http://www.dps.texas.gov/DriverLicense/customer%20service/defaults.aspx">www.dps.texas.gov/DriverLicense/customer service/defaults.aspx&lt;/a> or &lt;a href="http://www.utcssa.net/tel:512-424-2600">512-424-2600&lt;/a> should you have additional questions or need further assistance.&lt;/p>
&lt;/blockquote>
&lt;p>回复的重点是凭中国驾照可以在德州合法驾车最多90天，如果有对应的国际驾照，则可以驾车最多一年。&lt;/p>
&lt;p>我专门把这封邮件打印出来，和中国驾照放到一起，当作我在德州合法驾驶的有效证明，一直到我取得了德州的驾照为止。但这里有个问题，很明显DPS的工作人员并不知道中国不是《道路交通公约》的成员国，否则他不应该提到国际驾照的问题。&lt;/p>
&lt;p>写这篇文字的时候，我又去查了下德州DPS的网站，发现规定又变了。&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>Adults (18 and Older)&lt;/strong>&lt;br>
Applicants who have a valid, unexpired driver license from another U.S. state, U.S. territory, or from Canada must surrender their out of state/country driver license and are not required to take the knowledge or skills exams. Texas also has license issuance reciprocity with France, Germany, South Korea, and Taiwan only. Applicants who have a valid, unexpired driver license from one of these countries are not required to take the knowledge or skills exams if they surrender their out of country driver license. However, if the applicant does not wish to surrender their out of country driver license, they must take and pass all required exams. The reciprocity only applies to passenger vehicles, not commercial vehicles or motorcycles. Foreign licenses not in English or Spanish will need to have a translation service or their consulate translate the information on the driver license prior to arriving. This translation requirement also applies for marriage licenses.&lt;/p>
&lt;/blockquote>
&lt;p>在德州合法的外国驾照&lt;strong>只针对&lt;/strong>德州的互惠国，即**加拿大、法国、德国、韩国和台湾，**甚至连其他的《道路交通公约》签约国和地区都不行，更别提中国驾照。&lt;/p>
&lt;p>不过以我的经验，因为台湾在官方文件里通常写作 China(Taiwan)，很多美国人包括执勤的交通警察都分不清 China(PRC)和China(Taiwan)的区别，统一了一个中国的认识，所以在车行租车、路上警察查询时都能顺利过关。但是，这有非常大的隐患。一旦出了一个稍大的事故，需要出庭的时候，法官通常能发现你无证驾驶这个事实，即使事故本身责任判定对你有利，也会面临很大的政策风险，至少保险公司可以主张不赔付任何损失，还有可能罚款和监禁。&lt;/p>
&lt;p>最后我们不禁想问，为什么中国现在汽车拥有量和出国旅游人数年年攀升的前提下，还是不想加入《道路交通公约》来为自己公民争取一些出行便利呢？我臆测的一个原因是，通过外交努力也没办法替换掉大陆建国前就已经加入公约的台湾（中华民国），索性就完全不吊它了。&lt;/p></description></item><item><title>银行账户被盗</title><link>https://www.palfans.net/bank_account_compromised/</link><pubDate>Thu, 22 Jun 2017 16:57:37 +0000</pubDate><guid>https://www.palfans.net/bank_account_compromised/</guid><description>&lt;p>过去的一整天，我都在忙于更改各种账户的银行资料。因为它们关联的银行账户被盗，产生了好几笔支付交易。在银行的要求下，我只能关掉这个问题账户，重新开一个新账户，并手动更新到所有关联账户。&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/0929072242721.jpg" alt="">&lt;/p>
&lt;p>8年来，每个月我会抽一小时的时间对所有账户交易流水进行核对。这个月，我看到有两笔来自Paypal的扣款很陌生，因为我小儿子刚好在那天出生，我一整天都待在医院，根本没有时间接触电脑和手机进行任何消费活动。我立刻打开Paypal，发现在那天确实没有产生任何交易记录。我第一反应就是账户被黑了。&lt;/p>
&lt;p>Paypal这边完全无信息可查，我又返回银行的交易记录查询明细，看到这两笔交易都来自同一个人：PAYPAL DES:TRANSFER ID:xxxxxxxxx INDN:TRINA VONHAGEN CO ID:PAYPALSD22 WEB，姓名是TRINA VONHAGEN，Paypal账号是PAYPALSD22。这个时候我突然反应过来，刚才登录网上银行时，提示“账户密码错误次数过多，账户被锁”，说明对方也在尝试直接登录我的银行账户。不幸中的万幸是，我一直使用LastPass来为所有网络服务随机生成含特殊字符、数字、大小写字母的18位密码，每个账号密码都不同，完全杜绝撞库。在LastPass主密码安全的前提下，通过暴力破解的方式几乎是不可能的。&lt;/p>
&lt;p>接下来需要联系Paypal。当时已经是美国中部时间晚上11点，Paypal的客服人员理论上应该下班了。很幸运，鬼使神差下，我平板电脑上绑定的居然是中国Paypal的账户。我在不知不觉中拨通了Paypal上海的客服电话。客服小姐非常耐心听完整个过程，然后说好像没查到你这个账户关联了美国的银行。我一下想起来，登错账号。这时客服没有直接拒绝我，而是说按照规定我的问题应该交由美国部门来处理，但这个问题涉及账户被盗，她可以破例帮我尝试跨部门查询。查了我的美国Paypal的账户名，发现我的银行支票账户被之前提到这个Paypal账户关联了，除了已经清账的两笔，还有6笔其他的交易正在等待处理，不过这些交易还没有同步到银行系统。客服小姐立刻对问题账户做了警告标识，冻结了未生效的6笔交易，告知我已生效的2笔交易，他们会在走完查询流程后全额返还。不过因为她不了解美国银行的处理方式，建议我在第二天再次联系美国Paypal和银行。&lt;/p>
&lt;p>我又尝试拨打银行的客服电话，发现他们居然24小时工作，这在美国好少见。客服小姐听完描述，肯定的告诉我，账户资料泄露了。虽然可以冻结所有来自Paypal的付款请求，但是对方仍然可以在其他地方使用我的账户。唯一的方法是关掉现在的账户，再新开一个，把所有资金转移过去。因为这个账户关联着我日常生活的各个账号，我想了解是否必须这样做，否则太费时间了。客服小姐说，一切取决于我的决定，银行只是建议。而且目前没有更安全的方式来保证当前账户的安全。另外，我们的通话全程录音，如果因为我没有采纳银行的建议而导致今后资金损失，银行会排除所有赔偿责任。看来，华山只剩一条路了。然后她说，已经帮我提交了盗刷问题单，这两笔交易会立刻取消，款项会返还账户。最后她帮我对账户做了挂起操作，具体实现方式是直接给我账户添加了一笔$888888.88的欠款，这样我的账户就失去了付款能力。&lt;/p>
&lt;p>第二天一早，我就拨打美国Paypal的客服。他的回答和银行很类似，这两笔交易由银行负责追查，银行后台会和Paypal进行沟通，不需要客户自己操作。这时我心中有一个巨大的疑问，我的银行账户是怎么被关联到其他人的？Paypal的客服翻来覆去只是强调我的信息泄露了，Paypal本身不会出现这种错误，我需要反思自己使用过程有什么安全隐患。&lt;/p>
&lt;p>下午到银行柜台，新开账户，转账，等等。大概20分钟完成全部程序。这时，柜员提醒我说，账户又多了4笔支付请求，不过被银行直接拒绝了。同时被盗刷的两笔交易的退款也已经到帐。目前看来，仍然是个Happy Ending。&lt;/p>
&lt;p>对于任意添加银行账户这个问题，我仍然相当困惑和恐惧。和银行柜员讨论了一下，她认为这是不可能的。通常情况添加账户有两种模式，一个是通过网上银行用户名密码直接检验账户，一个是给这个银行账户存入两笔小额存款，然后校验存款金额来检验账户。我后来重新在Paypal实验了一下，Paypal采用的存钱校验的方式。这就很奇怪了，对方如何知道Paypal在我的银行账户存了多少钱呢？我很早就取消了纸质账单寄送，通过查询Gmail和银行网站登录信息，都没有异常。我只能说，Paypal的系统一定存在某个我还不知道的漏洞。&lt;/p>
&lt;p>最后，花了大半天时间，更新完所有交易信息。接下来还需要等待一个月左右，确认这些交易信息都真正生效了才能去掉我那888888.88的负债，彻底关闭问题账户。&lt;/p>
&lt;p>总结：&lt;/p>
&lt;ol>
&lt;li>美国银行业确实比国内银行成熟，应对盗刷赔偿问题，敢于承担责任。我不是很敢相信，国内能赔付得如此干脆快速。&lt;/li>
&lt;li>中国Paypal的客服态度比美国Paypal好了不止10倍。美国Paypal客服没有帮我解决任何问题，只是强调他们没有问题。&lt;/li>
&lt;li>支票真的不能随便撕，鬼知道有没有什么漏洞可以越过所有校验&lt;/li>
&lt;li>我再不会对外使用一次我的主银行账户。以后需要支票的话，我也会转账到一个小额账户，然后开支票。&lt;/li>
&lt;li>能用信用卡尽量用信用卡。&lt;/li>
&lt;li>现金都比支票安全，上面不会印着你的账户信息、姓名、住址和电话。&lt;/li>
&lt;li>定期对账很有必要，如果这次不是常规对账，我根本不可能发现对方采用的每次几十美金小额支付的细水长流的盗窃手法。&lt;/li>
&lt;li>银行的挂起账户功能一定是华人产品经理设计的，才会如此的偏好“8”。&lt;/li>
&lt;/ol></description></item><item><title>遭遇妊娠糖尿病</title><link>https://www.palfans.net/encounter-gestational-diabetes/</link><pubDate>Tue, 06 Jun 2017 04:19:43 +0000</pubDate><guid>https://www.palfans.net/encounter-gestational-diabetes/</guid><description>&lt;p>家里领导怀二宝，结果很不幸运被诊断为妊娠糖尿病。于是领导花了一些时间研究下到底什么是妊娠糖尿病。马上due date就要到了，我把这段生活摘录下来，以作纪念。&lt;/p>
&lt;p>自从我被诊断妊娠糖尿病后，发现很多朋友都不清楚这个病的具体含义，以为就是普通的孕妇血糖偏高，所以说说我自身的体验，没机会得的该庆幸，还有机会得的我只能说祝好运。&lt;/p>
&lt;p>首先，从我目前查到的各种资料显示，妊娠糖尿病不能完全被预防，跟你孕前及孕中的饮食结构没有绝对的关系，虽然体重、饮食、运动都有可能影响（家族史就不说了，那没法抱怨），但具体到我，显然都不是，就算是运气不好吧。&lt;/p>
&lt;p>其次，国内（至少重庆）一般要求在孕24周时做两小时血糖测试，得到空腹、喝糖水后一小时和两小时共三个结果，如果只有一个值高，就是通常意义上的血糖偏高，医生大多要求自行回家控制，之后复查，如果通过，就不算是妊娠糖尿病。如果是两个或以上值高，才会诊断为妊娠糖尿病。所以其实大家一般提到的血糖不过，大部分是这种情况，很轻松。但美国，是在26-28周时才做这个检查，因为他们认为，越临近28周才是结果最准确的时间点，之前有可能发现不了或误判。我是27周零2天做的一小时检测，不用空腹，直接测量喝糖水后一小时的值。我当然是高了，但还不足以高到直接判定妊娠糖尿病，于是拿到结果第二天（27周6天），我被安排做三小时检测，就是比国内检查多一个喝糖水后三小时的值。检测前晚，我在网上查到很多人想办法作弊通过，例如要求医生在26周之前查血糖，或者在检查前一周就开始控制饮食，又或在检查当天喝完糖水后快步走二三十分钟帮助代谢，前两种办法我已没法适用，又自以为是的想了解真实的身体状况，所以喝糖水后基本是一动不动的坐在那里等着抽血，事实证明，我为这个真实可算是付出了代价。最后，我就被华丽丽的通知除了空腹值正常，糖水后的三个值全超了，正式确诊为妊娠糖尿病，一般人即便被确诊也只超两个，这可能就是我之后控制也更困难的原因。&lt;/p>
&lt;p>被确诊后，再见我的医生时，他问我，知道这个病的危害吗，如果只是会生一个体重高于9磅（约等于4kg）的孩子有什么关系呢，特别我又不是顺产，而且中国人不是都偏爱胖宝宝吗？但其实危险的问题是，对于孕妈妈而言，虽然很多人在生产后恢复，但也比正常人增加30-40%的几率在老年后得慢性糖尿病，而且大概50%的糖妈妈在生产后五年之内就会得糖尿病，对我这种爱甜品面食的人来说将是多么生无可恋！对于未出生的孩子来说，有可能因为长期处于高血糖环境而造成胎死腹中、产后低血糖以及先天性糖尿病，虽然都是极端情况下最坏的结果，但落在自己身上不就是100%吗。即便什么都没发生，我和这个孩子的病史上从此都会增加一条，曾经得过妊娠糖尿病，以后也许就是其他疾病的依据。这让我想起初高中班主任经常威胁我们的话，某个坏事是坏到足以记入档案跟随你一辈子的哦，想想就心塞……&lt;/p>
&lt;p>如前所述，绝大部分血糖不过的情况是只超一个指数，并不会被诊断为该病，通常在妇产科医生那里就能处理了，而且因为症状轻微，稍加控制一般复查时也就通过了。但像我这种被正式诊断的就必须交给营养师来处理，国内好像就是医院的营养科。而美国因为都是私立机构，相互独立，所以我被推介去的是一个专门的糖尿病康复中心。那里的工作人员最高级别也只是注册的护士，不具备医师资格，没有处方权。确诊后，妇产科医生就把我的资料传给这个中心，由他们直接来联系我辅导上课和复诊的时间。这通常是一次三小时的辅导以及一次复诊，但我又因为情况特殊，追加了一次复诊。前两个小时主要是讲解这个病的原理等背景知识，制定我每天查血糖的具体程序，如何使用血糖仪，以及出现低血糖的处理。图五就是我日常方便携带出门的设备，包括免洗消毒液、血糖仪、试纸、扎指头的注射器以及替换针头。很多人觉得每天四次扎指头是最痛苦的，但其实跟医院里直接拿针头靠自己下手区别很大。那个黑色的注射器有一个弹簧把针头推入，深度可以自己调节，反正能挤出血就行，所以痛感不算强烈，相比饮食、运动和每次的指数正常来说，这是最可以忽略和忍受的部分。我每天空腹和三餐之后两小时分别监控血糖，空腹要求起床后立即查，最好不要活动身体，我有一次洗脸漱口之后再查，指数都比往常高；餐后两小时是指从开始吃饭起算，而不是吃完之后，为了留有足够的时间饭后休息、运动以及冷静情绪（气喘吁吁的查血糖一般也会偏高），但又要细嚼慢咽，我一般吃饭时间都控制在20分钟左右。&lt;/p>
&lt;p>最后一小时才是真正的重头戏，教我怎么吃，吃多少。首先把食物大致分为碳水化合物（包括所有奶制品及豆浆，水果，主食，含淀粉的蔬菜）、蛋白质（各种肉类、鸡蛋、坚果和芝士）、脂肪、不含淀粉的蔬菜。虽然一般饼干、面包、蜂蜜、糖果等零食以及果汁和含糖饮料肯定是完全杜绝，但我必须严格控制的其实主要是碳水化合物的摄入量，不能多不能少，所以在给我的饮食手册上以15克为单位标注了每种常见食物的碳水化合物含量，如果漏掉的就读包装上的标签来计算。其实这个营养标签国内外食品包装都有，但我从未留意过，现在成了我买和吃任何食品的先决条件，没有标签的如水果就参照重量用称来称。具体到我的饮食计划就是图五，每天三餐三点，从早上七点到晚上十点，每三小时一次，不管饱或饿，一顿都不能漏。原始计划上规定我早餐和宵夜各吃30克糖水化合物，早点和午点各吃15克，中餐和晚餐是45克，全天一共180克，每餐都必须同时包括蛋白质，这有利于增加饱腹感以及平衡血糖水平。除此以外，蛋白质、脂肪和不含淀粉蔬菜是不限量的，随便吃。另外要求我每天必须有三十分钟的快步走。刚开始听完，我觉得好宽松，其实大部分食物都可以吃，好多还可以随便吃，运动量也不大，我一下觉得如释重负，但事实证明，这个对大部分人有用的计划在我身上没用，这就是造成我二次复诊的原因。&lt;/p>
&lt;p>妊娠糖尿病的原理是因为怀孕过程中的激素分泌阻止了人体正常的胰岛素分泌，标准的自己跟自己对抗，而且孕程不同，阻止作用也有大有小。所以即便我如此严格饮食，轻易不敢尝试新的种类，但指数还是经常飘忽不定，于是运动成了我唯一还能努力的方向。虽然营养师只要求我每天总共快走三十分钟，而且不分时间，不分次数，但我在被确诊妊娠糖尿病之前就基本保持了每天六十分钟的运动量，可见这对我也明显不够。于是我先是把时间延长到九十分钟，分别在午饭和晚饭前完成，因为早上和中午要接送Larry 上下学，晚饭后又要收拾厨房，没有其他更合适的空档。这确实成功了一段时间，但很快空腹血糖就开始飙高了，于是我又调整，晚饭前变成晚饭后，回来再收拾厨房。可每当我气喘吁吁走回来，看到家里一大一小明明已经错过了小朋友的洗澡睡觉时间，不是还凑在一起玩游戏，就是为了洗澡吵架时，内心真是崩溃的。又调整，六顿餐点每餐之后在家里快走十到三十分钟，视大小餐而定，既兼顾家里的杂事，又不用一次走得太累。&lt;/p>
&lt;p>于是我每天的作息是这样的：早上六点四十准时起床，先测血糖，之后准备自己的早饭，保证在七点准时吃到第一口。十五到二十分钟吃完，休息片刻开始走路十到十五分钟。通常这时候Larry 同学也起床了，我在自己吃饭和走路的空档里准备好他的早饭，督促他自己乖乖吃。八点左右完成走路，开始准备朱先生和Larry 的中饭，过程中催促他们赶紧洗脸漱口换衣服，保证在八点三十至三十五之间出门，这样我才能九点之前把车停到学校停车场，坐在车上等着九点能准时查血糖，之后再送Larry 进教室。送完他回到家通常是九点四十左右，坐下稍微休息片刻，开始准备早点，数饼干，称重量，十点准时来吃。吃完又到走路时间。一切停当，十点四十左右。接下来视当天的具体情况而定，先收拾早餐遗留的厨房事务，是否需要见医生，是否需要洗衣服做清洁，是否需要开始炖汤准备晚餐，是否要去超市买菜购物，是否有其他临时安排（例如上周为了给Larry 找夏天过暑假的学校，我花了接近一周时间每天这个时候打电话联系学校，各方面合适的就下午再带上他一起去现场考察）……如果什么事都没有，这算是我的午休时间。十二点四十，开始准备中饭，拌沙拉称肉加热等，争取十二点五十五准时吃饭，这样我午饭后才能有十五分钟的走路时间，之后立刻出门接Larry 放学。再回到家里大概两点四十左右，安顿小朋友看上电视，我收拾中饭的遗留和洗好他从学校带回来的午餐盒，三点测血糖。三点五十，准备午点，同时准备Larry 的下午加餐，吃完走路。四点四十左右，通常小朋友电视看完了，自己也玩够了，开始缠着我或者去图书馆，或者在家讲故事，或者去小区公园玩。这期间朱先生一般六点到家，会打电话问我晚饭吃什么，把安排告诉他后，他负责晚饭操作，我带着孩子大概七点前到家吃饭。吃完赶紧收拾厨房，走路，边走边催促小朋友喝奶准备洗澡睡觉，各种威逼利诱，还尽量不要生气情绪稳定，保证八点半之前能坐下休息，否则气喘吁吁的到九点测血糖肯定超。测完血糖趁晚点之前自己洗澡收拾，十点又开吃，吃完又走，保证十一点之前上床睡觉。顺利的时候都好，一旦遇上小朋友发脾气不讲道理那天，全套打乱，有天早上他不知道怎么了坚决不去洗脸漱口换衣服，每次这种时候朱先生只能两手一摊望着我，我忙着教训他最后还是错过了出门时间，干脆不去上学了，可我气得不行，血糖又超高。从此尽量让自己不要生气。&lt;/p>
&lt;p>一个多月的各种纠结，血糖终于大致稳定下来，超的次数越来越少。因为妊娠糖尿病，我从31周开始就必须每周去见妇产科医生，拿血糖结果给他检查，并且每周监控胎心或做B超来评估宝宝的生长情况。上周，医生终于发现我从27周到33周体重一直没长，于是劝我稍微放松血糖，不用很低，达到临界值即可，争取长点体重。我心里恨不得骂人，那指数又不是靠自己写，想让它多少就多少，每天又是控制饮食又是折腾运动，我倒是想长点呢，从哪来啊……看来，又一段各种试验的旅程要开始了，真心累人！&lt;/p></description></item><item><title>Blog 更换服务器</title><link>https://www.palfans.net/blog-changed-server/</link><pubDate>Mon, 05 Jun 2017 20:49:13 +0000</pubDate><guid>https://www.palfans.net/blog-changed-server/</guid><description>&lt;p>算起来，从2005年开始写这个Blog，累计换了好几次服务器。从Windows主机到Linux主机，从朋友托管机器到专业空间服务商，从相当业余的myrice到老牌空间hostgator，在不断折腾中慢慢熟悉了域名，DNS，虚拟空间等各种概念和网站知识。2010年搬到&lt;a href="http://www.laoxuehost.com/">老薛主机&lt;/a>，因为不想折腾了。一晃七年，不能说没有遇到问题，比如网站经常会在中国的半夜出现MySQL服务器挂死的问题，为此我提交了好多问题单。不过一旦提交问题单，解决都非常快。马上新一年的账单又要来了，不过鉴于现在打理网站的时间少之又少，Blog基本处于停止更新的状态，一年估计能写一篇，所以即使年费才几十块钱，也不想再续费了。考虑到家里常年开着一台惠普的小服务器，反正闲着也是浪费电，索性在周末把全站从虚拟空间转移到自家的机器上。再见了，老薛。&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/blog_change_server.jpg" alt="">&lt;/p>
&lt;p>picture from &lt;a href="https://www.vpnranks.com">vpnranks&lt;/a>&lt;/p>
&lt;p>搬家过程没什么挑战，Docker的出现让部署变得异常容易。开了4个容器，分别放数据库，Nginx，PHP-FPM和FTP，直接导入从原站拿到的备份，总耗时不超过2小时。唯一的坑在部署Let&amp;rsquo;s Encrypt的SSL证书。因为web服务器放在容器里，没有公网IP地址，所以不能采用certbot全自动模式来获取证书。看了下文档，certbot支持通过带manual参数来更新DNS TXT记录的方式来验证域名从而获取证书，命令很简单&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">certbot certonly --manual --preferred-challenges=dns --manual-auth-hook /etc/letsencrypt/authenticator.sh --manual-cleanup-hook /etc/letsencrypt/cleanup.sh -d &amp;lt;domain_name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>官方文档提供了一个authenticator.sh的&lt;a href="https://certbot.eff.org/docs/using.html#pre-and-post-validation-hooks">示例&lt;/a>，用来调用Cloudflare DNS API。但我在这里被坑了好久。逼不得已一行行阅读代码，终于发现问题。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Strip only the top domain to get the zone id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DOMAIN=$(expr &amp;lt;span style=&amp;#34;color: #0000ff;&amp;#34;&amp;gt;match&amp;lt;/span&amp;gt; &amp;#34;&amp;lt;span style=&amp;#34;color: #8b0000;&amp;#34;&amp;gt;$CERTBOT_DOMAIN&amp;lt;/span&amp;gt;&amp;#34; &amp;#39;.*\.\(.*\..*\)&amp;#39;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这句正则式需要匹配的域名包含两个“.”，否则返回值为空。如果打算为根域名（abc.com）安装证书，certbot没法获取域名信息，会抛异常。找到问题就好办了。计算机技术发展这么多年，以我的水平能遇到的问题都不能算真正的问题。正则式不好用，就换用dig工具来获取SOA地址，然后就能正常验证域名并获得Let&amp;rsquo;s Encrypt签发的证书。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">DOMAIN=$(dig soa &amp;#34;&amp;lt;span style=&amp;#34;color: #8b0000;&amp;#34;&amp;gt;$CERTBOT_DOMAIN&amp;lt;/span&amp;gt;&amp;#34; | grep -v ^\; | grep SOA | awk &amp;#39;{&amp;lt;span style=&amp;#34;color: #0000ff;&amp;#34;&amp;gt;print&amp;lt;/span&amp;gt; $1}&amp;#39;;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>我为什么选择留在美国</title><link>https://www.palfans.net/why-stay-in-us/</link><pubDate>Sun, 22 May 2016 05:33:36 +0000</pubDate><guid>https://www.palfans.net/why-stay-in-us/</guid><description>&lt;p>在没来美国之前，我从没设想过，如果有一天，自己也生活在地球的另外一边，会是什么样子？以致于最终决定携全家动身之时，我仍没有做好相应的心理准备。&lt;/p>
&lt;p>首先，要感谢我的公司，给我提供了不错的条件和机会。入职十年，出过两次为期半年的长差。一次是入职没多久，就被安排独自一人去加拿大的客户现场做实施。真正的人生地不熟，英文也不好，可以说，生活都不能自理。这次出差锻炼的回报，第一是见了世面，处事不惊；第二是被逼快速上手公司产品；第三是学会用很烂的英文与人沟通。另外一次是去阿曼客户现场做支持，充分领略了阿拉伯风土人情，以及结识了公司来自欧洲、印度和中国的同事们。现在这个团队，一大半的成员定居在美国和澳大利亚，也算是我来美国的一个契机。&lt;/p>
&lt;p>在美国生活了两年多，离融入社会还早，但也对当地的环境也慢慢开始熟悉。美国并不像我在中国时想象的那样完美。&lt;/p>
&lt;ol>
&lt;li>这里的职场仍然有歧视，华裔担任高级职务的机会很少。&lt;/li>
&lt;li>人工费高，万事靠自己。即使年薪十万看起来比美国中位数高出不少，也仍然不能支撑我动辄请工人帮忙的开销。所以我要经常在后院锄草，修整步道，上房顶检修空调，查看被风吹跑的防水瓦，顺便处理被小孩玩具堵住的马桶，还要关注家里不断出现的蚂蚁等等。这些简直是我在国内没想象过的生活方式。&lt;/li>
&lt;li>医疗昂贵。在有公司医疗保险支持的前提下，看病依然是一项费时费力费钱的经济活动。相比之下，我再也不抱怨国内的医保体系。&lt;/li>
&lt;li>远离父母，完全不能照应他们的生活日常。&lt;/li>
&lt;/ol>
&lt;p>我和老婆讨论过，在这里带孩子、购物、做饭、家务等等的一切生活，都得靠自己，没有别人可以依靠。我们为了什么而坚持？如果说为了自我享受，在美国真不如在中国。我俩在中国的收入水平，去除汇率差异，和在美国的收入水平基本持平，但是我可以请阿姨做饭，请保洁公司打扫房间，请物业帮忙换灯泡、修窗帘等一切琐事。我们可以请父母帮忙看下孩子，然后去看电影、听音乐会、逛商场。&lt;/p>
&lt;p>我内心动摇过很多次。但很快就会重新坚定意志。&lt;/p>
&lt;p>在国内的时候，作为一名工科生，我对互联网比较熟悉，知道很多科学上网的方式。入职现在的公司后，网络更是没有墙的问题。所以我有很多的机会接触外面真真假假的新闻消息，每次看完都义愤填膺，难以自抑。来美国后，反而对这些消息失去了兴趣，仅仅通过微博微信了解下国内的情况。只是中国的社会新闻太惊悚，太超出想象，每天都有层出不穷的社会热点让我目瞪口呆。&lt;/p>
&lt;p>于是，我给自己的理由是，为了孩子，再苦再难，也要坚持下去。我希望他生活的环境，是公平的、正义的、自由的，不需要担心雾霾致癌，不需要害怕牛奶添加，不需要恐惧因言获罪，不需要焦虑碰瓷撒泼。&lt;/p>
&lt;p>这个理由够了吗？&lt;/p>
&lt;p>我想现阶段，足够我自我鼓励，一步一步往前走了。&lt;/p></description></item><item><title>Oneplus One （一加手机）加密后如何升级系统</title><link>https://www.palfans.net/how-to-upgrade-encrypted-oneplus-one/</link><pubDate>Sat, 14 Nov 2015 06:24:00 +0000</pubDate><guid>https://www.palfans.net/how-to-upgrade-encrypted-oneplus-one/</guid><description>&lt;p>一年多以前从红米换成一加Oneplus One 64G版本，高通骁龙801的CPU，2G的运存，使用很顺手，终于体验了一把旗舰机的感觉。一加公司比较厚道，机器可以很轻松的通过&lt;a href="http://www.wugfresh.com/brt/">Bacon Root Toolkit&lt;/a>工具一键解锁和Root。&lt;/p>
&lt;p>因为公司邮件系统的强制安全策略，所有接入系统的移动终端都会要求加密，但是一加国内版用的是ColorOS系统，加密功能貌似被取消了，而国际版的CyanogenMod系统却能正常加密，毫不犹豫刷成CM并成功加密。&lt;/p>
&lt;p>但是问题来了，CM系统更新非常频繁，经常收到OTA升级通知，每次点击更新会在下载完升级包之后重启到Recovery的机器人界面，然后升级失败，怎么回事？&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/OnePlusOneAndroid5.1.1LollipopCyanogen.jpg" alt="">&lt;/p>
&lt;p>仔细看了下错误日志，问题应该出在加密上。安卓系统加密时把/data分区进行加密，而其他的分区都没有加密。手机在正常开机状态下，升级包文件都下载到/data分区保存，但不知道什么原因，进入Recovery后并不能正确的解密该分区，CM11S和CM12S都是这个问题，于是/data加载失败，升级肯定也就不能继续。&lt;/p>
&lt;p>通过反复尝试，我发现有三种方法可以成功升级。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>adb sideload update&lt;br>
把升级包下载到电脑上，把手机和电脑用数据线连接起来，adb sideload就能从电脑读取升级文件后直接写入手机的/system分区，完全不访问/data，就不再有加密分区的限制。Bacon Root Toolkit提供了一键adb sideload的功能，点击下图按钮后，按照软件提示进行操作即可写入数据。&lt;br>
&lt;img src="https://res.palfans.net/img/sideload.jpg" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>usb otg update&lt;br>
将升级包复制到优盘中，通过otg线连接到手机，重启进入Recovery后，加载usb-otg分区。因为usb-otg也是未加密状态，可以直接访问，所以可能正常升级。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Custom Recovery&lt;br>
给手机刷一个Custom Recovery，我选的是twrp 2.8.7.0，输入密码后能正确解密/data分区，就不需要电脑、数据线和otg线，直接手机下载升级包并升级。在这里我走了一些弯路。Bacon Root Toolkit提供刷写一个临时Custom Recovery的功能，重启自动恢复为官方Recovery。看起来挺美好，但是，虽然这个Custom Recovery也是twrp 2.8.7.0，它却不能正常解密/data，即使密码正确，也只能反复让你输入密码。所以一定要刷一个永久的Custom Recovery。当然，通过Bacon Root Toolkit随时可以刷回官方Recovery。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>似乎很完美？其实并不全是。如果是rooted手机，升级会失败……&lt;/p>
&lt;p>按常理root并不会影响OTA升级，但rooted的一加手机/system分区的校验码发生变化，升级包的脚本校验后，造成无法升级。所以如果手机root了，就没有办法使用增量包升级。很多人推荐的方法是等新版本的全量包发布，不过CM的全量包要比增量包晚很久才出，每天看着状态栏的升级提示却不能升级会很烦心。这里有个小技巧，下载前一版本的全量包和新版本的增量升级包，用前面的三种方法先刷全量包恢复成官方版本，再刷增量升级包，然后再一键root，就能提前升级到最新系统。&lt;/p></description></item><item><title>走正步</title><link>https://www.palfans.net/goose_step/</link><pubDate>Thu, 03 Sep 2015 19:52:10 +0000</pubDate><guid>https://www.palfans.net/goose_step/</guid><description>&lt;p>昨天微信朋友圈被五星红旗和齐刷刷的正步GIF图片刷屏。因为要等儿子睡着了才能打开电视，我只看到了最后飞机过场的部分，没有看到前面正步分列式。从大家分享的动图看，确实很有气势。我当年高考语文成绩全区第一，现如今却仍然只能喊道：『我靠，好齐！我靠，牛逼！』后来找了重放视频，心里却远不如别人激动，估计这是我政治不正确的又一体现。我心里就一直有个问题：『走正步有意义吗？』&lt;/p>
&lt;blockquote>
&lt;p>维基百科的&lt;a href="https://zh.wikipedia.org/wiki/%E6%AD%A3%E6%AD%A5">正步&lt;/a>条目说，正步起源于中世纪欧洲的一种民间舞蹈，这种舞蹈的特征是腿高抬至与地面平行。17世纪时，普鲁士十分流行这种舞蹈。18世纪，腓特烈大帝下的普鲁士军队，在阅兵中吸取了这种民间舞蹈的步法，称其为“Stechschritt”，字面意思为“刺步”。英语使用者则称这种姿势为“鹅步”（Goose-step）。诺尔曼·戴维斯在他的《欧洲历史》一书中提到：在那个军国主义时期，正步的意义，对普鲁士军队自身来讲，表明他们的纪律性及身体素质足以应付一切命令；对普鲁士的平民来讲，表明不遵守纪律将被无情地粉碎；对普鲁士的敌人来讲，表明普鲁士军队不是穿着制服的农村小伙子，而是超人；对于整个世界来说，正步走象征着普鲁士不仅仅是个强国，而且是个高傲的强国。但是这种行军模式达到了普鲁士所预期的效果。&lt;/p>
&lt;/blockquote>
&lt;p>现在看来，正步尤其受法西斯主义或者国家集体主义的青睐，比如大部分受德国或前苏联军事影响的国家，至今依然喜欢在重要场合走正步。&lt;/p>
&lt;p>走正步的第一重意义就是，霸气外露！央视解说也提到，受阅部队正步通过主席台的时候，横看一条线，竖看一条线，斜看还是一条线，体现了我军高昂的士气和威武的军威。&lt;/p>
&lt;p>第二重意义就是集体意识。通过摆臂踢腿的机械重复，追求五线平行，来达到强化参与者的集体意识，排除个人意识的目的。而这对于需要集权的统治阶级来说尤为重要。统治阶级总是会力图从各个方面入手减轻甚至消除个人意识萌发对政权的影响。&lt;/p>
&lt;p>因此，作为事实上的集权国家，我国把集体主义，民族主义看得非常重要。不光军队，现在几乎所有的中学和大学，甚至少数小学，在入学的时候，都要搞2-3周的军训，而队列训练是其中重中之重。&lt;/p>
&lt;p>有人说，正步训练能够加强纪律性，提高凝聚力，类似的活动还包括叠豆腐块被子，站军姿等。诚然，纪律对一支部队来说很重要，但是如果把大量的时间都花在走正步、叠被子上，即使纪律高度统一，但单兵作战能力、协同作战能力、突发处置能力没有提高，这支部队同样是不值得信任的。&lt;/p>
&lt;p>美军从不走正步，但是没人敢轻视这支看似纪律涣散的部队。从他们每年多次的实战中能看出，即使是普通军种，单兵和协同战斗能力都极强。&lt;/p>
&lt;p>中国军人已经远离战场几十年，实战经验完全不为外人所知，连演习都是一切按计划进行。我不认为走正步完全没有意义，我倒真希望他们是留了一手。要不然，过于钟情于表演性质的训练，到了实战发生的时候，就不敢想象了。&lt;/p>
&lt;p>当然，最好永远没有检验实战能力的一天。&lt;/p></description></item><item><title>记抗战中的一名国军少校</title><link>https://www.palfans.net/there_was_a_major/</link><pubDate>Sat, 22 Aug 2015 08:24:06 +0000</pubDate><guid>https://www.palfans.net/there_was_a_major/</guid><description>&lt;p>今天家里领导突然收到长辈的一条长微信，阅读后感慨不少，全文摘录如下：&lt;/p>
&lt;blockquote>
&lt;p>记抗战中的一名国军少校&lt;/p>
&lt;p>过几天就是抗战胜利纪念日，好像要放假一天，也邀请了国外政要，举办盛大仪式。届时，自然会有整齐的方队。也就有有关领导的慷慨激昂。说实在，我对这些没有什么兴趣。&lt;/p>
&lt;p>关于抗战，心中总萦怀一个人，多少年来，如鲠在喉。&lt;/p>
&lt;p>六十多年前，有一个重庆青年，跟随做布匹生意的父亲到了上海。他的父亲粗通文墨，有了点散碎银子，就想孩子受到较好的教育，有点诗书传家的味道。加之，这个青年是家中长子，他的父亲就不吝钱财，送他到教会中学去读书。教会学校自然重视西方文化，除国文、中国历史之外，其余均是国外教材，讲课的教师也大都是英国人。因此，他受到了很好的英语教育。之后，他顺利的考入复旦大学外国语文学系。我曾经看过他发表的文章，是关于对莎士比亚的哈姆雷特的研讨。生活就这样平平静静在这个青年面前徐徐展开。他无论如何都没有想到，他受到的教育已经种下了祸根，一口流利的英语会酿成一杯苦酒。&lt;/p>
&lt;p>“813，日本在上海打了战。”他父亲的布匹生意受到重大影响，他平静的生活也被打乱。随后，复旦大学迁往重庆北碚夏坝。为追随学校，他决定上海前去重庆。当时水路交通已经阻断，回重庆只能绕道步行。走了一个多月，其间颠簸流离，自不待言。我想，他对日寇入侵，自然是仇恨的。&lt;/p>
&lt;p>回到重庆，继续读书。抗战仍旧在进行。突然，国军到复旦大学招人，说是美军为国军训练士兵，急需翻译。他愿意投笔从戎为抗战出力，于是前去报名。因为他口语极好，立即就被录取。在之后，跟随部队坐着嘎斯汽车，前往云南腾冲。他在部队的工作，我看过一些老照片，印象深的就是美军在训练国军士兵学习使用喷火器，他在旁边翻译。给国军教学的都是美军军官，对这些无军衔的翻译有些瞧不起。众翻译于是向上反映，战争之中，一切均可打破常规，每个翻译竟然均被任命为了“少校”。&lt;/p>
&lt;p>到部队仅三月，日本投降了。美军教官要撤走，翻译当然就无事可干。这时有两条路可走，留在部队或退役。他牵挂自己的毕业证，于是返渝回到学校继续读书至毕业。然后在求精中学教英语。49年后，他转到西南贸易部工作，他的工作与军队再无任何交集。&lt;/p>
&lt;p>三个月的时间很短，但他必须在每次填写履历时表明此事。于是，尽管他工作非常尽心，入党、提拔与他没有任何关联。文革前，他就是一个文化商店的经理，据说还是破格处理的。&lt;/p>
&lt;p>文革开始了，他的厄运继续放大。他的形象不知怎么就与“小兵张嘎”、地道战“中的日军翻译重叠了。于是，他的经理被撤。有很长时间，白天在建筑工地上抬砖，晚上被关押在单位。他写了厚厚的交待，时间远超过了三个月。他当时必定陷入了巨大逻辑困惑：说到国军是为抗战，明明“蒋介石躲在峨眉山，只是下山摘桃子”。伟人定论，谁敢说三道四！说为与人民为敌，助纣为虐，又心有不甘。于是，他百口莫辩。当然，灾难也会传递，他的孩子，也因为这个少校翻译官受到迫害。所有的悲愤，他用了一个奇特的方式来表达。做了一个小铁炉，将家中的书用来烧火做饭。他教导他的孩子，不要读书，应当去学木匠、当砖工。那时，他的言行与诗书传家的上辈期望相差何止千里！&lt;/p>
&lt;p>纵观我国历史，在民族危亡之际，有挺身而出的壮士，如岳飞、如文天祥，如张自忠，他们的英雄事迹彪炳千古，值得后人缅怀。但“一将成名万骨枯”，民族战争的胜利，更有普通民众或大或小的奉献，他们至少应当受到公平对待。&lt;/p>
&lt;p>最近，我国政府屡屡提到要求日本政府对那场战争道歉。我想，责人需己正，攘外需安内，有关机构、有关人士是不是应当为自己的不实说法、为自己的不当言行，真诚道歉，还历史本来面目，才是对抗战真正的纪念。&lt;/p>
&lt;p>这位少校翻译官，就是我的父亲。他带着有历史问题的帽子，郁郁最终。&lt;/p>
&lt;p>呜呼哀哉，尚飨！&lt;/p>
&lt;/blockquote>
&lt;p>文中提到的少校军官，就是领导的爷爷。一篇短文，勾起她童年无数美好的回忆，不禁潸然泪下，同时也了解了那些从未有人提及的陈年往事。&lt;/p>
&lt;p>自从搬到国外生活，我们在公共场合的言论愈发谨慎，稍不注意就会被扣上卖国求荣的帽子。但如老先生文章所述，心事不吐，如鲠在喉。&lt;/p>
&lt;p>今年是抗战胜利70周年，有个话题特别火，谁才是中流砥柱。经过国内几十年的历史普及教育，结论清楚明白。不过等到我们接触的信息源越来越多，给这个结论打个问号似乎都稍显不够，还得加个惊叹号。国内教材中罕有关于正面战场的记述，倒是横店影视城越来越热闹。争名夺利很正常，成王败寇也是常态，这不是我想在这里表达的。我只是想问下，我们什么时候才能以科学客观的态度来真实记录这段悲壮的历史？或许等不到那天了，因为真相实在羞于启齿。&lt;/p>
&lt;p>爷爷的一生是个悲剧，但不仅是他个人，也是一个时代的悲剧。很多人连郁郁而终都是个奢望，生不如死，最后惨淡收场。&lt;/p>
&lt;p>我所在的城市军人非常多，晚饭时我们讨论美军的福利。现役和退役的军人，在生活各个方面都有优待。还听说过很多次美军针对执行任务被困士兵的援救行动，有时候仅仅是为了抢回遗体。不得不联想到解放后留在大陆的国军士兵。他们中的很多人都曾经浴血抗日主战场，但身份尴尬，晚年凄惨。更不用提滇缅战场上的英勇老兵，完全被社会遗忘，终生流落异国他乡。原因很简单，穿了国军的军装，领了国军的口粮。&lt;/p>
&lt;p>还有从朝鲜战场战俘营坚持回国的俘虏兵，想必这几十年过得异常艰辛。&lt;/p>
&lt;p>这些人都没做错什么，甚至是英雄，命运却把他们推向了黑暗。&lt;/p>
&lt;p>党国欠他们一个诚恳的道歉。&lt;/p>
&lt;p>不过，如果我也是其中一员，我想，我永远不会原谅。&lt;/p></description></item><item><title>十周年庆</title><link>https://www.palfans.net/decennial/</link><pubDate>Fri, 14 Aug 2015 06:01:35 +0000</pubDate><guid>https://www.palfans.net/decennial/</guid><description>&lt;p>下个星期就是这个BLOG的十周年纪念，突然间，白马过隙，忽然而已。&lt;/p>
&lt;p>现在BLOG没落了，大家都喜欢短平快的社交平台，这里荒得长了草。直到Google告诉我，网站被人黑了，挂了木马。哑然失笑，曾经花费多少时间改模板，加功能的一亩三分地，竟然已经很久没有更新过，以至于成为害人工具，不过料想应该也害不了多少人，访问量极低。这『黑客』估计是跑了个脚本，在我的网站目录里生成了不下500个静态网页文件，个个带毒。一个一个手工清理不现实，只好全部铲掉重装。好在数据库一直有脚本在后台默默的备份，重建倒不费事，主题直接用默认模板，挺符合现在的审美。同时为了迎接新一个十年的开始，终于申请了证书，强制SSL。&lt;/p>
&lt;p>谢谢有BLOG相陪的十年。。。&lt;/p></description></item><item><title>漫游在美国 - 如何打电话</title><link>https://www.palfans.net/roaming_in_us_call/</link><pubDate>Fri, 18 Jul 2014 18:38:03 +0000</pubDate><guid>https://www.palfans.net/roaming_in_us_call/</guid><description>&lt;p>来到美国5个月了，往国内打电话肯定是日常生活的一个重要组成部分，今天总结下这几个月的经验。&lt;/p>
&lt;p>出国前，我为我的中国移动号码办理了国际漫游。因为是全球通用户，整个办理流程比较简单，直接用手机拨打10086申请即可，每次申请的时效是一年，不需要预存保证金。漫游期限快到时，直接在国外拨打中国移动的境外漫游免费客服号码+8613800100186，请客服人员帮你转接到号码归属省的移动客服办理漫游延期。只有用中国移动号码拨打这个号码才享受免费优惠。现在中国移动针对美国、韩国、新加坡等180个国家和地区推出了漫游123的资费政策，即根据不同的漫游国家和地区，漫游主被叫资费分别为每分钟0.99元，1.99元和2.99元。客观的说，这个资费已经很便宜了，尤其是美国被归在1元区。还记得去阿曼出差时，这个资费政策还没执行，给国内打电话18元一分钟，每次打电话都要做充分的思想准备，现在也划在3元区里，降幅惊人。&lt;/p>
&lt;p>但是，如果完全用中国移动的号码接打所有电话，即使已经1元区了，费用还是不便宜，而且很多线上线下服务需要登记美国国内号码，所以还是得弄个本地号码。现在美国各个运营商的资费基本都是无限国内通话，无限国内短信，限量LTE流量，无限GPRS流量，每个月40-60美金，以美国的国民收入来算，比较便宜。&lt;/p>
&lt;p>美国国内通话搞定了，接下来是中国的国际长途部分。&lt;/p>
&lt;p>&lt;strong>打电话回国&lt;/strong>&lt;/p>
&lt;p>美国的电信市场充分开放，各类电话服务蓬勃发展，电话卡、回拨、转接号层出不穷。我选择了 &lt;a href="http://www.skype.com/zh_CN/">Skype&lt;/a> 和 &lt;a href="http://www.localphone.com/?rb=s63mql8XCPsTT7p1LYTtRczRXG6bpzkXVvpejFFFXvA">Localphone&lt;/a> （之后简称 LP）。这俩都是老牌的网络电话供应商，其中 Skype 的名气更大一些，现在已经是微软的资产。我在折腾 &lt;a href="http://www.palfans.net/?s=voice">Google Voice&lt;/a> 的时候开始接触 LP，算下来5年了，这个公司的服务一直非常稳定，值得信赖。这两个产品比较一下，拨回中国的费率都差不多，Skype 是1.1美分，LP 是1.2美分，都不到一毛钱人民币每分钟。如果使用它们的包月套餐，费率就更低。它们都是基于VOIP的产品，通话效果依赖于拨打时的网络环境， Skype 采用了P2P的传输技术，理论上在窄带宽和渣网络时能最大限度保持通话质量。但凡事没有绝对，经常会出现在同一个场景，Skype 通话质量不行，但 LP 清晰无延迟的情况，反之亦然。所以这俩可以都备上，互为补充。Skype 和 LP 都提供直拨号码转接服务，即为对方的中国号码分配一个当地号码，直接用美国手机拨打此当地号码，即可拨回中国，国际通话部分的费率不变，即使没有移动网络也能拨打，非常方便。但是 Skype 的这个服务每次拨打时会加收一笔4.9美分接通费，而 LP 没有，所以短暂通话 LP 划算，通话时间长，Skype就更划算。&lt;/p>
&lt;p>&lt;strong>接国内电话&lt;/strong>
沟通不能单方面，如何让国内的亲朋能方便的联系我呢？现在中国移动、中国联通和中国电信三家都分别推出了各自的服务来满足这个需求。&lt;/p>
&lt;ul>
&lt;li>中国移动：&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>中国移动推出了 &lt;a href="https://www.jegotrip.com.cn/">无忧行&lt;/a> 服务，需要智能手机（Android/iPhone）安装应用，通过移动网络或WiFi连接服务器。最大的卖点是可以租一个中国移动的号码（大陆和香港都可以，月租不同），也可以直接绑定国内现有的中国移动手机号，每月月租1美金。在应用在线的情况下，所有拨打到该移动号码的电话，都会通过网络转到 Jego 应用来免费接听。从2014年7月16日开始，Jego 也支持接收该移动号码收到的所有短信，相当于完全没有国际漫游费用。也可以从应用内直接拨打电话回国，能在接听方的手机上正确显示自己绑定的移动手机号码。这一点是 Skype 和 LP 想做但一直无法实现的功能。用它俩打回国，来电号码显示永远都稀奇古怪甚至『受限号码』，很像诈骗号码，很多时候对方都不愿意接听这种电话。据 Skype 解释，来电号码 （Caller ID）在中国大陆的显示问题，主要由国内电信运营商垄断造成，在其他大部分国家和地区都能正常使用。对于这点，我只能呵呵了。Jego接听免费，拨打费率是2.2美分，比 Skype 和 LP 贵，缺点是必须依赖互联网和智能手机应用，能收短信不能发短信。另外交费系统和现有移动系统完全分开，需要美金，好在可以Paypal。&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>中国联通：&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>中国联通推出了&lt;a href="http://www.wo-call.com/">沃信&lt;/a>服务，英文很奇葩，『我靠』，也不知道是谁想出来的。功能点基本上和 Jego 类似，甚至连应用程序的界面都雷同，丑到没朋友。不过沃信只能注册一个新的河北联通的手机号码，而不能绑定其他省的已有联通号码。这点不如 Jego 灵活。但沃信使用联通交费系统，用人民币交费，月租10元，打电话0.15元，发短信0.1元，这比 Jego 稍稍方便些。缺点和 Jego 一样，依赖互联网和智能手机应用。&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>中国电信：&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>中国电信北美公司搞了个&lt;a href="https://www.chinavirtualnumber.com/home.dhtml">一卡双号&lt;/a>服务，注册一个上海电信的手机号码，绑定到任意美国和加拿大的固话、手机号码。国内拨打这个上海电信号码，直接转接到美国这边的手机、固话，完全没有国际长途部分的费用，而且全程走的都是中美间的国际电话线路，不依赖互联网，不需要智能手机，语音效果和直拨国际长途完全一样，是三家公司的产品中通话质量最高最稳定的解决方案。月租9.99美金，无限时接听，现在还送每个月200分钟拨回中国的国际长途时长，不过主叫采用VOIP电话，需要拨打转接号，而且通话质量和接听国内来电完全不能比。另外，这个上海电信的号码，完全不能接收短信。&lt;/p>
&lt;/blockquote>
&lt;p>一开始我用的中国电信的服务，接听还好，但主叫质量很不稳定，拨打转接号后无法调用电话簿的联系人记录，需要手工输入被叫号码，不方便，那200分钟国际长途几乎没用完过。加上每月10美金的固定开销，于是放弃。因为我从来没用过联通的手机，所以也没有尝试沃信。现在使用 Jego，虽然也是VOIP的一种，但是不论主叫还是被叫，通话质量都非常不错，语音清晰，也感觉不到延迟。另外一个好处是，加入了亲情计划或者企业短号的移动号码，短号依然可用。现在国内的亲戚朋友，仍然可以只拨3个数字就拨通电话，而通话也归到亲情计划的分钟数内，免费通话。&lt;/p>
&lt;p>之前不了解这些电话服务，选手机都只考虑双卡双待，现在完全没有必要了，只要是个智能手机都能正常安装应用，接听国内号码来电。从这点来说，也能看到国内电信三巨头正在谋求改变。虽然受限于国内通信管制，在国内没有什么亮眼的服务，但是一旦跑到自由市场经济的环境中，也在积极探索新鲜事物。只求国内的环境也能早点向正面的、积极的方向发展。&lt;/p></description></item><item><title>为VirtualBox中的CentOS扩展Swap空间</title><link>https://www.palfans.net/extend_swap_space_in_virtualbox/</link><pubDate>Mon, 02 Jun 2014 18:30:56 +0000</pubDate><guid>https://www.palfans.net/extend_swap_space_in_virtualbox/</guid><description>&lt;p>在VirtualBox中安装好CentOS后，会发现默认的Swap空间大小是根据初次配置的可用内存来生成的，正常使用足够。但是，如果需要安装Oracle，它要求最少2GB的交换空间，这时就需要扩展交换空间。&lt;/p>
&lt;p>首先运行swapon命令查看交换空间大小，如果得到的大小少于&lt;strong>2097152&lt;/strong>，就需要增加交换空间。&lt;/p>
&lt;pre>&lt;code>swapon -s
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="https://res.palfans.net/img/1.png" alt="">&lt;/p>
&lt;p>1. 首先，在VirtualBox中新增一块硬盘&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/2.png" alt="">&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/3.png" alt="">&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/4.png" alt="">&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/5.png" alt="">&lt;/p>
&lt;p>2. 格式化新增的硬盘&lt;/p>
&lt;pre>&lt;code>fdisk -l
fdisk /dev/sdb
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="https://res.palfans.net/img/6.png" alt="">&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/7.png" alt="">&lt;/p>
&lt;p>&lt;img src="https://res.palfans.net/img/8.png" alt="">&lt;/p>
&lt;p>3. 转换为Swap space&lt;/p>
&lt;pre>&lt;code>mkswap /dev/sdb1
swapon /dev/sdb1
swapon -s
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="https://res.palfans.net/img/9.png" alt="">&lt;/p>
&lt;p>4. 让CentOS开机自动加载新增的交换空间&lt;/p>
&lt;pre>&lt;code>vi /etc/fstab
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="https://res.palfans.net/img/10.png" alt="">&lt;/p></description></item></channel></rss>